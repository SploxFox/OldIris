!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=2)}([function(e,t,s){"use strict";function i(e,t=!0){return"resources/"+(t?window.localizer.language+"/":"default/")+e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePath=i,t.loadFile=function e(t,s,n=!0){var a=new XMLHttpRequest;a.open("GET",i(t,n),!0),a.onreadystatechange=(()=>{4===a.readyState&&(200==a.status||n&&e.bind(this)(t,s,!1))}).bind(this),a.onload=function(){200==a.status&&s.bind(this)(a)}.bind(this),a.send(null)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);t.TabbedElement=class{constructor(e,t){this.tabName=e,this.labelShown=!1,this.tabElement=document.createElement("div"),this.tabElement.classList.add("tab","pop"),this.tabContentElement=document.createElement("div"),t&&(this.icon=document.createElement("img"),this.icon.src=i.resolvePath(t,!1),this.icon.classList.add("icon"),this.tabContentElement.appendChild(this.icon)),this.tabTextElement=document.createElement("span"),this.tabTextElement.classList.add("tab-label"),this.refreshLabel(),this.tabContentElement.classList.add("tab-content"),this.tabElement.appendChild(this.tabContentElement),this.bodyElement=document.createElement("div"),this.bodyElement.classList.add("tab-body","pop","interactable"),this.tabElement.appendChild(this.bodyElement),this.tabElement.addEventListener("interacted",function(){"opened"==this.state?this.close():this.open()}.bind(this)),this.tabElement.classList.add("interactable"),window.addEventListener("resize",this.refreshLabel.bind(this))}get state(){return this._state}open(){this.tabElement.classList.add("opened"),this._state="opened"}close(){this.tabElement.classList.remove("opened"),this._state="closed"}refreshLabel(){this.icon&&window.innerWidth>500||!this.icon?this.labelShown||this.showLabel():this.labelShown&&this.hideLabel()}showLabel(){this.tabTextElement.textContent=window.localizer.localize(this.tabName),this.tabContentElement.appendChild(this.tabTextElement),console.log("shown"),this.labelShown=!0}hideLabel(){console.log("hidden"),this.tabTextElement.parentNode.removeChild(this.tabTextElement),this.labelShown=!1}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(3),n=s(1),a=s(8),o=s(9);var r=new i.Iris;window.localizer=new a.Localizer("english",function(){r.localizationLoaded.bind(r)(),r.userInterface.textBox.tabs=[new n.TabbedElement("save","icons/save.svg"),new n.TabbedElement("chat-history","icons/chat.svg"),new o.OrganizerTab(r.storyManager)],r.userInterface.textBox.updateTabs()}),r.loadStory("main-story.json"),document.body.appendChild(r.element),(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|(o|a)d)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent))&&(document.body.classList.add("mobile"),document.body.parentElement.classList.add("mobile"),r.showScrollNotification())},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(4),n=s(5),a=s(6);t.Iris=class{constructor(){this.touchStarted=!1,this.finishedLoading=!1,this.interfaceHasLoaded=!1,this.storyHasLoaded=!1,this.visuals=new n.Visuals,this.element=document.createElement("div"),this.element.classList.add("game"),this.guiWrapper=document.createElement("div"),this.guiWrapper.classList.add("interface-wrapper"),this.element.appendChild(this.guiWrapper),window.addEventListener("touchstart",function(e){e.touches[0].target.dispatchEvent(new CustomEvent("interacted",{})),e.target.classList.contains("interactable")||this.advance(),this.touchStarted=!0}.bind(this)),window.addEventListener("click",function(e){this.touchStarted?this.touchStarted=!1:(e.target.dispatchEvent(new CustomEvent("interacted",{})),e.target.classList.contains("interactable")||(console.log(this.userInterface.textBox),this.userInterface.textBox.tabsOpen||this.advance()))}.bind(this))}loadStory(e){this.storyManager=new i.StoryManager(e,this.storyLoaded.bind(this))}localizationLoaded(e){console.log(this),this.userInterface=new a.UserInterface,this.interfaceHasLoaded=!0,this.guiWrapper.appendChild(this.userInterface.textBox.element),this.checkLoadStatus()}storyLoaded(){this.storyHasLoaded=!0,this.checkLoadStatus()}checkLoadStatus(){this.interfaceHasLoaded&&this.storyHasLoaded&&(this.finishedLoading=!0,this.start())}start(){this.storyManager.cue.speech||this.storyManager.goToNextSpeech(),this.userInterface.textBox.showText(this.storyManager.cue.character,this.storyManager.speech)}advance(){this.userInterface.textBox.isFinished?(this.storyManager.goToNextSpeech(),this.userInterface.textBox.showText(this.storyManager.cue.character,this.storyManager.speech)):this.userInterface.textBox.finish()}showScrollNotification(){var e=document.createElement("div");this.guiWrapper.appendChild(e),e.textContent="Scroll Down",e.classList.add("scroll-noti","pop","text"),e.style.top="10px",window.setTimeout(function(){e.style.top="-100vh"},5e3)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);t.StoryManager=class{constructor(e,t){this.episodePosition=0,this.chapterPosition=0,this.cuePosition=0,this.speechPosition=0,this._evidence=[],i.loadFile.bind(this)("story/main-story.json",this.storyFinishedLoading,!0),this.storyLoadedCallback=t}storyFinishedLoading(e){this.story=JSON.parse(e.responseText),this.storyLoadedCallback()}get speech(){return this.story.episodes[this.episodePosition].chapters[this.chapterPosition].content[this.cuePosition].speech[this.speechPosition]}get cue(){var e=this.story.episodes[this.episodePosition].chapters[this.chapterPosition].content[this.cuePosition];if(null==e)throw"Error: Found cue to be undefined!";return e}get chapter(){return this.story.episodes[this.episodePosition].chapters[this.chapterPosition]}get episode(){return this.story.episodes[this.episodePosition]}get evidence(){return this._evidence}register(){this.cue.evidence&&this._evidence.push({name:this.cue.name,id:this.cue.id,description:this.cue.description,image:this.cue.image?this.cue.image:void 0})}advance(){this.cue.speech&&this.cue.speech.length-1>this.speechPosition?(this.speechPosition++,console.log("Advanced to next speech. New position: "+this.speechPosition)):this.chapter.content.length-1>this.cuePosition?(this.cuePosition++,this.speechPosition=0,console.log("Advanced to next cue.")):this.episode.chapters.length>this.chapterPosition&&(this.chapterPosition++,this.speechPosition=0,this.cuePosition=0,console.log("Advanced to next chapter."))}goToNextSpeech(){do{this.register(),this.advance()}while(!this.cue.speech)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Visuals=class{constructor(){this.canvas=document.createElement("canvas"),this.canvas.classList.add("visuals"),this.context=this.canvas.getContext("2d"),this.context.rect(10,10,20,20)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(7);t.UserInterface=class{constructor(){this.textBox=new i.TextBox}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(){this.tabs=[],this.element=document.createElement("div"),this.element.classList.add("text","text-box"),this.speakerElement=document.createElement("span"),this.speakerElement.classList.add("name","pop"),this.textElement=document.createElement("div"),this.textElement.classList.add("text-block"),this.tabsElement=document.createElement("div"),this.tabsElement.classList.add("tabs"),this.updateTabs(),this.element.appendChild(this.speakerElement),this.element.appendChild(this.textElement),this.element.appendChild(this.tabsElement)}updateTabs(){for(;this.tabsElement.firstElementChild;)this.tabsElement.firstElementChild.remove();for(var e=0;e<this.tabs.length;e++)this.tabsElement.appendChild(this.tabs[e].tabElement)}get tabsOpen(){for(var e=0;e<this.tabs.length;e++)if("opened"==this.tabs[e].state)return!0;return!1}clear(){for(;this.textElement.firstElementChild;)this.textElement.firstElementChild.remove();this.speakerElement.textContent="",this.blipNum=0}showText(e,t){this.clear(),this.isFinished=!1,this.speakerElement.textContent=e;var s="fast",n="speech",a=function(e){if("#"!=t[e]||"#"!=t[e+1])return{character:t[e],mode:n,speed:s,index:e,isLastCharacter:e+1>=t.length};try{for(var i="",a=e+2;"("!=t[a]&&t.length>a;a++)i+=t[a];for(var o,r="",c=a+1;")"!=t[c]&&t.length>c;c++)r+=t[c];switch(o=r.split(","),i){case"mode":n=o[0];break;case"speed":s=o[0]}return{index:c}}catch(e){console.log("Unable to parse command!"),console.log(e)}}.bind(this);for(var o=0;o<t.length;o++){var r=a(o);if(i.instanceOfQueuedCharacter(r)){var c=document.createElement("span");c.classList.add("text",n,"hidden"),c.textContent=t[o],c.dataset.index=""+o,this.textElement.appendChild(c)}else o=r.index}(function e(n){var o=function(){if(n<t.length){var s=a(n),o=s.index+1;i.instanceOfQueuedCharacter(s)&&this.addChar(s),e.bind(this)(o)}}.bind(this);this.shouldSpeedUp?o():window.setTimeout(o.bind(this),i.getWaitTime(s))}).bind(this)(0)}static getWaitTime(e){switch(e){case"fast":return 20;case"slow":return 50;case"very-slow":return 200}}static instanceOfQueuedCharacter(e){return void 0!==e.character}addChar(e){document.querySelector("[data-index='"+e.index+"']").classList.remove("hidden");this.blipNum++," "==e.character&&(this.blipNum=0),e.isLastCharacter&&(this.isFinished=!0,this.shouldSpeedUp=!1)}finish(){this.shouldSpeedUp=!0}}t.TextBox=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(0);t.Localizer=class{constructor(e,t){this.localizationLoadedCallback=t,this._language=e,window.localizer=this,i.loadFile.bind(this)("interface.json",function(e){this.localized=JSON.parse(e.responseText),this.localizationLoadedCallback()}.bind(this))}localize(e){return this.localized[e]}get language(){return this._language}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),n=s(10),a=s(0);t.OrganizerTab=class extends i.TabbedElement{constructor(e){super("organizer","icons/organizer.svg"),this.story=e,this.bodyElement.classList.add("organizer"),this.evidenceContainerElement=document.createElement("div"),this.evidenceContainerElement.classList.add("evidence-container","pop"),this.bodyElement.appendChild(this.evidenceContainerElement)}open(){n.replaceElementChildren(this.evidenceContainerElement,this.getEvidenceElements()),super.open()}getEvidenceElements(){for(var e=[],t=0;t<this.story.evidence.length;t++){var s=document.createElement("div");s.classList.add("evidence","pop");var i=document.createElement("img");i.src=this.story.evidence[t].image?a.resolvePath(this.story.evidence[t].image):"https://www.staples-3p.com/s7/is/image/Staples/sp36188286_sc7?wid=512&hei=512",s.appendChild(i);var n=document.createElement("div");n.classList.add("evidence-text"),s.appendChild(n);var o=document.createElement("span");o.textContent=this.story.evidence[t].name,o.classList.add("evidence-name"),n.appendChild(o);var r=document.createElement("span");r.textContent=this.story.evidence[t].description,r.classList.add("evidence-description"),n.appendChild(r),s.classList.add("interactable"),s.addEventListener("interacted",function(t,s){for(var i=0;i<e.length;i++)e[i].classList.remove("selected"),s.target.classList.add("selected");this.selectedEvidence=t,console.log(t)}.bind(this,this.story.evidence[t])),e.push(s)}return console.log(e),e}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceElementChildren=function(e,t){for(;e.firstElementChild;)e.firstElementChild.remove();for(var s=0;s<t.length;s++)e.appendChild(t[s]);return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbGUtbG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS90YWJiZWQtZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2lyaXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3J5L3N0b3J5LW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Zpc3VhbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VzZXItaW50ZXJmYWNlL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS90ZXh0LWJveC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9jYWxpemVyLnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS9vcmdhbml6ZXItdGFiLnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS9jbGVhci1lbGVtZW50LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVzb2x2ZVBhdGgiLCJwYXRoIiwibG9jYWxpemVkIiwid2luZG93IiwibG9jYWxpemVyIiwibGFuZ3VhZ2UiLCJsb2FkRmlsZSIsImNhbGxiYWNrIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJ0aGlzIiwib25sb2FkIiwic2VuZCIsImZpbGVfbG9hZGVyXzEiLCJUYWJiZWRFbGVtZW50IiwiW29iamVjdCBPYmplY3RdIiwidGFiTmFtZSIsImljb24iLCJsYWJlbFNob3duIiwidGFiRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRhYkNvbnRlbnRFbGVtZW50Iiwic3JjIiwiYXBwZW5kQ2hpbGQiLCJ0YWJUZXh0RWxlbWVudCIsInJlZnJlc2hMYWJlbCIsImJvZHlFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXRlIiwiY2xvc2UiLCJfc3RhdGUiLCJyZW1vdmUiLCJpbm5lcldpZHRoIiwic2hvd0xhYmVsIiwiaGlkZUxhYmVsIiwidGV4dENvbnRlbnQiLCJsb2NhbGl6ZSIsImNvbnNvbGUiLCJsb2ciLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpcmlzXzEiLCJ0YWJiZWRfZWxlbWVudF8xIiwibG9jYWxpemVyXzEiLCJvcmdhbml6ZXJfdGFiXzEiLCJnYW1lIiwiSXJpcyIsIkxvY2FsaXplciIsImxvY2FsaXphdGlvbkxvYWRlZCIsInVzZXJJbnRlcmZhY2UiLCJ0ZXh0Qm94IiwidGFicyIsIk9yZ2FuaXplclRhYiIsInN0b3J5TWFuYWdlciIsInVwZGF0ZVRhYnMiLCJsb2FkU3RvcnkiLCJib2R5IiwiZWxlbWVudCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJwYXJlbnRFbGVtZW50Iiwic2hvd1Njcm9sbE5vdGlmaWNhdGlvbiIsInN0b3J5X21hbmFnZXJfMSIsInZpc3VhbHNfMSIsInVzZXJfaW50ZXJmYWNlXzEiLCJ0b3VjaFN0YXJ0ZWQiLCJmaW5pc2hlZExvYWRpbmciLCJpbnRlcmZhY2VIYXNMb2FkZWQiLCJzdG9yeUhhc0xvYWRlZCIsInZpc3VhbHMiLCJWaXN1YWxzIiwiZ3VpV3JhcHBlciIsImV2ZW50IiwidG91Y2hlcyIsInRhcmdldCIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImNvbnRhaW5zIiwiYWR2YW5jZSIsInRhYnNPcGVuIiwiU3RvcnlNYW5hZ2VyIiwic3RvcnlMb2FkZWQiLCJ0eXBlIiwiVXNlckludGVyZmFjZSIsImNoZWNrTG9hZFN0YXR1cyIsInN0YXJ0IiwiY3VlIiwic3BlZWNoIiwiZ29Ub05leHRTcGVlY2giLCJzaG93VGV4dCIsImNoYXJhY3RlciIsImlzRmluaXNoZWQiLCJmaW5pc2giLCJzY3JvbGxOb3RpIiwic3R5bGUiLCJ0b3AiLCJzZXRUaW1lb3V0Iiwic3RvcnlMb2FkZWRDYWxsYmFjayIsImVwaXNvZGVQb3NpdGlvbiIsImNoYXB0ZXJQb3NpdGlvbiIsImN1ZVBvc2l0aW9uIiwic3BlZWNoUG9zaXRpb24iLCJfZXZpZGVuY2UiLCJzdG9yeUZpbmlzaGVkTG9hZGluZyIsInN0b3J5IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiZXBpc29kZXMiLCJjaGFwdGVycyIsImNvbnRlbnQiLCJ1bmRlZmluZWQiLCJjaGFwdGVyIiwiZXBpc29kZSIsImV2aWRlbmNlIiwicHVzaCIsImlkIiwiZGVzY3JpcHRpb24iLCJpbWFnZSIsImxlbmd0aCIsInJlZ2lzdGVyIiwiY2FudmFzIiwiY29udGV4dCIsImdldENvbnRleHQiLCJyZWN0IiwidGV4dF9ib3hfMSIsIlRleHRCb3giLCJzcGVha2VyRWxlbWVudCIsInRleHRFbGVtZW50IiwidGFic0VsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImJsaXBOdW0iLCJzcGVha2VyIiwidGV4dCIsImNsZWFyIiwic3BlZWQiLCJwYXJzZUNoYXIiLCJpbmRleCIsImlzTGFzdENoYXJhY3RlciIsImNvbW1hbmQiLCJwYXJhbXMiLCJwYXJhbVN0cmluZyIsImoiLCJzcGxpdCIsImUiLCJjaGFyIiwiaW5zdGFuY2VPZlF1ZXVlZENoYXJhY3RlciIsImNoYXJFbGVtZW50IiwiZGF0YXNldCIsIm5leHRDaGFyIiwicHJlcGFyZVRvQWRkQ2hhciIsIm5leHRJbmRleCIsImFkZENoYXIiLCJzaG91bGRTcGVlZFVwIiwiZ2V0V2FpdFRpbWUiLCJxdWVyeVNlbGVjdG9yIiwibG9jYWxpemF0aW9uTG9hZGVkQ2FsbGJhY2siLCJfbGFuZ3VhZ2UiLCJjbGVhcl9lbGVtZW50XzEiLCJzdXBlciIsImV2aWRlbmNlQ29udGFpbmVyRWxlbWVudCIsInJlcGxhY2VFbGVtZW50Q2hpbGRyZW4iLCJnZXRFdmlkZW5jZUVsZW1lbnRzIiwiZWxlbWVudHMiLCJldmlkZW5jZUVsZW1lbnQiLCJldmlkZW5jZUltYWdlIiwiZXZpZGVuY2VUZXh0IiwiZXZpZGVuY2VOYW1lIiwiZXZpZGVuY2VEZXNjcmlwdGlvbiIsInNlbGVjdGVkRXZpZGVuY2UiLCJuZXdDaGlsZHJlbiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpE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QVVZLE9BQU8sWUFDNUJrSCxFQUFFdEUsT0FBdUJ4RCxVQUFVQyxJQUFJLFlBRTVDYixLQUFLbUssaUJBQW1CdkQsRUFDeEI5RSxRQUFRQyxJQUFJNkUsSUFDZGxJLEtBQUtzQixLQUFLQSxLQUFLa0csTUFBTVUsU0FBUzFKLEtBRWhDMk0sRUFBU2hELEtBQUtpRCxHQUdsQixPQURBaEksUUFBUUMsSUFBSThILEdBQ0xBLG1GQzNEZjdNLEVBQUEyTSx1QkFBQSxTQUF1Q3pHLEVBQXNCa0gsR0FDekQsS0FBT2xILEVBQVEwRSxtQkFBcUIxRSxFQUFRMEUsa0JBQWtCcEcsU0FDN0QsSUFBSyxJQUFJdEUsRUFBSSxFQUFHQSxFQUFJa04sRUFBWW5ELE9BQVEvSixJQUNyQ2dHLEVBQVFsQyxZQUFZb0osRUFBWWxOLElBRXBDLE9BQU9nRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuIiwiLypleHBvcnQgZnVuY3Rpb24gbG9hZEZpbGUocGF0aDogc3RyaW5nLCBjYWxsYmFjazogKHJlcXVlc3Q6IFhNTEh0dHBSZXF1ZXN0KSA9PiB2b2lkKSB7XHJcbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgcmVxdWVzdC5vcGVuKFwiR0VUXCIsIFwicmVzb3VyY2VzL1wiICsgcGF0aCwgdHJ1ZSk7XHJcbiAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKHRoaXM6IFhNTEh0dHBSZXF1ZXN0KTogdm9pZCB7Y2FsbGJhY2sodGhpcyl9O1xyXG4gICAgcmVxdWVzdC5zZW5kKG51bGwpXHJcbn0qL1xyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVBhdGgocGF0aDogc3RyaW5nLCBsb2NhbGl6ZWQ6IGJvb2xlYW4gPSB0cnVlKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBcInJlc291cmNlcy9cIiArIChsb2NhbGl6ZWQgPyAoKHdpbmRvdyBhcyBhbnkpLmxvY2FsaXplci5sYW5ndWFnZSArIFwiL1wiKSA6IFwiZGVmYXVsdC9cIikgKyBwYXRoO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbG9hZEZpbGUocGF0aDogc3RyaW5nLCBjYWxsYmFjazogKHJlcXVlc3Q6IFhNTEh0dHBSZXF1ZXN0KSA9PiB2b2lkLCBsb2NhbGl6ZWQ6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKHRoaXMpO1xyXG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHJlcXVlc3Qub3BlbihcIkdFVFwiLCByZXNvbHZlUGF0aChwYXRoLCBsb2NhbGl6ZWQpLCB0cnVlKTtcclxuICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gKCgpID0+IHtcclxuICAgICAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIC8vc3VjY2Vzc1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvY2FsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgbG9hZEZpbGUuYmluZCh0aGlzKShwYXRoLCBjYWxsYmFjaywgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSkuYmluZCh0aGlzKTtcclxuICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKTogYW55IHsgXHJcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5iaW5kKHRoaXMpKHJlcXVlc3QpXHJcbiAgICAgICAgfVxyXG4gICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgcmVxdWVzdC5zZW5kKG51bGwpO1xyXG59IiwiaW1wb3J0IHsgcmVzb2x2ZVBhdGggfSBmcm9tIFwiLi4vZmlsZS1sb2FkZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUYWJiZWRFbGVtZW50IHtcclxuICAgIHRhYkVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgYm9keUVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgdGFiQ29udGVudEVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgX3N0YXRlOiBcIm9wZW5lZFwiIHwgXCJjbG9zZWRcIjtcclxuICAgIGxhYmVsU2hvd246IGJvb2xlYW47XHJcbiAgICB0YWJUZXh0RWxlbWVudDogSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgdGFiTmFtZTogc3RyaW5nO1xyXG4gICAgaWNvbjogSFRNTEltYWdlRWxlbWVudDtcclxuICAgIGNvbnN0cnVjdG9yICh0YWJOYW1lOiBzdHJpbmcsIGljb24/OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnRhYk5hbWUgPSB0YWJOYW1lO1xyXG4gICAgICAgIHRoaXMubGFiZWxTaG93biA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMudGFiRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy50YWJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWJcIixcInBvcFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy50YWJDb250ZW50RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaWYgKGljb24pIHtcclxuICAgICAgICAgICAgdGhpcy5pY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgdGhpcy5pY29uLnNyYyA9IHJlc29sdmVQYXRoKGljb24sZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmljb24uY2xhc3NMaXN0LmFkZChcImljb25cIik7XHJcbiAgICAgICAgICAgIHRoaXMudGFiQ29udGVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5pY29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy50YWJUZXh0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRoaXMudGFiVGV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhYi1sYWJlbFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWZyZXNoTGFiZWwoKTtcclxuXHJcbiAgICAgICAgdGhpcy50YWJDb250ZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiLWNvbnRlbnRcIik7XHJcbiAgICAgICAgdGhpcy50YWJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGFiQ29udGVudEVsZW1lbnQpO1xyXG5cclxuICAgICAgICB0aGlzLmJvZHlFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmJvZHlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItYm9keVwiLFwicG9wXCIsXCJpbnRlcmFjdGFibGVcIik7XHJcbiAgICAgICAgdGhpcy50YWJFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuYm9keUVsZW1lbnQpO1xyXG5cclxuICAgICAgICB0aGlzLnRhYkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImludGVyYWN0ZWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09IFwib3BlbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnRhYkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImludGVyYWN0YWJsZVwiKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLnJlZnJlc2hMYWJlbC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGdldCBzdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnRhYkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm9wZW5lZFwiKTtcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9IFwib3BlbmVkXCI7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnRhYkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm9wZW5lZFwiKTtcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9IFwiY2xvc2VkXCI7XHJcbiAgICB9XHJcbiAgICByZWZyZXNoTGFiZWwoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKCgodGhpcy5pY29uICYmIHdpbmRvdy5pbm5lcldpZHRoID4gNTAwKSB8fCAhdGhpcy5pY29uKSkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMubGFiZWxTaG93bikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TGFiZWwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5sYWJlbFNob3duKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUxhYmVsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvd0xhYmVsKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudGFiVGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSAoKHdpbmRvdyBhcyBhbnkpLmxvY2FsaXplci5sb2NhbGl6ZSh0aGlzLnRhYk5hbWUpKTtcclxuICAgICAgICB0aGlzLnRhYkNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGFiVGV4dEVsZW1lbnQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic2hvd25cIik7XHJcbiAgICAgICAgdGhpcy5sYWJlbFNob3duID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGhpZGVMYWJlbCgpOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImhpZGRlblwiKTtcclxuICAgICAgICB0aGlzLnRhYlRleHRFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy50YWJUZXh0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5sYWJlbFNob3duID0gZmFsc2U7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBJcmlzIH0gZnJvbSBcIi4vaXJpc1wiO1xyXG5pbXBvcnQgeyBUYWJiZWRFbGVtZW50IH0gZnJvbSBcIi4vdXNlci1pbnRlcmZhY2UvdGFiYmVkLWVsZW1lbnRcIjtcclxuaW1wb3J0IHsgTG9jYWxpemVyIH0gZnJvbSBcIi4vbG9jYWxpemVyXCI7XHJcbmltcG9ydCB7IE9yZ2FuaXplclRhYiB9IGZyb20gXCIuL3VzZXItaW50ZXJmYWNlL29yZ2FuaXplci10YWJcIjtcclxuXHJcblxyXG4vL1RoZSBvcmRlciBvZiB0aGUgY3JlYXRpb24gb2YgdGhlIGxvY2FsaXplciBhbmQgZ2FtZSBtYXkgY3JlYXRlIGEgcmFjZSBjb25kaXRpb24uXHJcbnZhciBnYW1lID0gbmV3IElyaXMoKTtcclxuKHdpbmRvdyBhcyBhbnkpLmxvY2FsaXplciA9IG5ldyBMb2NhbGl6ZXIoXCJlbmdsaXNoXCIsIGxvY0xvYWRlZCk7XHJcbmdhbWUubG9hZFN0b3J5KFwibWFpbi1zdG9yeS5qc29uXCIpO1xyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnYW1lLmVsZW1lbnQpO1xyXG5cclxuaWYgKC8oYW5kcm9pZHxiYlxcZCt8bWVlZ28pLittb2JpbGV8YXZhbnRnb3xiYWRhXFwvfGJsYWNrYmVycnl8YmxhemVyfGNvbXBhbHxlbGFpbmV8ZmVubmVjfGhpcHRvcHxpZW1vYmlsZXxpcChob25lfChvfGEpZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KXx8LzEyMDd8NjMxMHw2NTkwfDNnc298NHRocHw1MFsxLTZdaXw3NzBzfDgwMnN8YSB3YXxhYmFjfGFjKGVyfG9vfHNcXC0pfGFpKGtvfHJuKXxhbChhdnxjYXxjbyl8YW1vaXxhbihleHxueXx5dyl8YXB0dXxhcihjaHxnbyl8YXModGV8dXMpfGF0dHd8YXUoZGl8XFwtbXxyIHxzICl8YXZhbnxiZShja3xsbHxucSl8YmkobGJ8cmQpfGJsKGFjfGF6KXxicihlfHYpd3xidW1ifGJ3XFwtKG58dSl8YzU1XFwvfGNhcGl8Y2N3YXxjZG1cXC18Y2VsbHxjaHRtfGNsZGN8Y21kXFwtfGNvKG1wfG5kKXxjcmF3fGRhKGl0fGxsfG5nKXxkYnRlfGRjXFwtc3xkZXZpfGRpY2F8ZG1vYnxkbyhjfHApb3xkcygxMnxcXC1kKXxlbCg0OXxhaSl8ZW0obDJ8dWwpfGVyKGljfGswKXxlc2w4fGV6KFs0LTddMHxvc3x3YXx6ZSl8ZmV0Y3xmbHkoXFwtfF8pfGcxIHV8ZzU2MHxnZW5lfGdmXFwtNXxnXFwtbW98Z28oXFwud3xvZCl8Z3IoYWR8dW4pfGhhaWV8aGNpdHxoZFxcLShtfHB8dCl8aGVpXFwtfGhpKHB0fHRhKXxocCggaXxpcCl8aHNcXC1jfGh0KGMoXFwtfCB8X3xhfGd8cHxzfHQpfHRwKXxodShhd3x0Yyl8aVxcLSgyMHxnb3xtYSl8aTIzMHxpYWMoIHxcXC18XFwvKXxpYnJvfGlkZWF8aWcwMXxpa29tfGltMWt8aW5ub3xpcGFxfGlyaXN8amEodHx2KWF8amJyb3xqZW11fGppZ3N8a2RkaXxrZWppfGtndCggfFxcLyl8a2xvbnxrcHQgfGt3Y1xcLXxreW8oY3xrKXxsZShub3x4aSl8bGcoIGd8XFwvKGt8bHx1KXw1MHw1NHxcXC1bYS13XSl8bGlid3xseW54fG0xXFwtd3xtM2dhfG01MFxcL3xtYSh0ZXx1aXx4byl8bWMoMDF8MjF8Y2EpfG1cXC1jcnxtZShyY3xyaSl8bWkobzh8b2F8dHMpfG1tZWZ8bW8oMDF8MDJ8Yml8ZGV8ZG98dChcXC18IHxvfHYpfHp6KXxtdCg1MHxwMXx2ICl8bXdicHxteXdhfG4xMFswLTJdfG4yMFsyLTNdfG4zMCgwfDIpfG41MCgwfDJ8NSl8bjcoMCgwfDEpfDEwKXxuZSgoY3xtKVxcLXxvbnx0Znx3Znx3Z3x3dCl8bm9rKDZ8aSl8bnpwaHxvMmltfG9wKHRpfHd2KXxvcmFufG93ZzF8cDgwMHxwYW4oYXxkfHQpfHBkeGd8cGcoMTN8XFwtKFsxLThdfGMpKXxwaGlsfHBpcmV8cGwoYXl8dWMpfHBuXFwtMnxwbyhja3xydHxzZSl8cHJveHxwc2lvfHB0XFwtZ3xxYVxcLWF8cWMoMDd8MTJ8MjF8MzJ8NjB8XFwtWzItN118aVxcLSl8cXRla3xyMzgwfHI2MDB8cmFrc3xyaW05fHJvKHZlfHpvKXxzNTVcXC98c2EoZ2V8bWF8bW18bXN8bnl8dmEpfHNjKDAxfGhcXC18b298cFxcLSl8c2RrXFwvfHNlKGMoXFwtfDB8MSl8NDd8bWN8bmR8cmkpfHNnaFxcLXxzaGFyfHNpZShcXC18bSl8c2tcXC0wfHNsKDQ1fGlkKXxzbShhbHxhcnxiM3xpdHx0NSl8c28oZnR8bnkpfHNwKDAxfGhcXC18dlxcLXx2ICl8c3koMDF8bWIpfHQyKDE4fDUwKXx0NigwMHwxMHwxOCl8dGEoZ3R8bGspfHRjbFxcLXx0ZGdcXC18dGVsKGl8bSl8dGltXFwtfHRcXC1tb3x0byhwbHxzaCl8dHMoNzB8bVxcLXxtM3xtNSl8dHhcXC05fHVwKFxcLmJ8ZzF8c2kpfHV0c3R8djQwMHx2NzUwfHZlcml8dmkocmd8dGUpfHZrKDQwfDVbMC0zXXxcXC12KXx2bTQwfHZvZGF8dnVsY3x2eCg1Mnw1M3w2MHw2MXw3MHw4MHw4MXw4M3w4NXw5OCl8dzNjKFxcLXwgKXx3ZWJjfHdoaXR8d2koZyB8bmN8bncpfHdtbGJ8d29udXx4NzAwfHlhc1xcLXx5b3VyfHpldG98enRlXFwtL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7XHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJtb2JpbGVcIik7XHJcbiAgICBkb2N1bWVudC5ib2R5LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vYmlsZVwiKTtcclxuICAgIGdhbWUuc2hvd1Njcm9sbE5vdGlmaWNhdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2NMb2FkZWQoKSB7XHJcbiAgICBnYW1lLmxvY2FsaXphdGlvbkxvYWRlZC5iaW5kKGdhbWUpKCk7XHJcbiAgICBnYW1lLnVzZXJJbnRlcmZhY2UudGV4dEJveC50YWJzID0gW1xyXG4gICAgICAgIG5ldyBUYWJiZWRFbGVtZW50KFwic2F2ZVwiLCBcImljb25zL3NhdmUuc3ZnXCIpLFxyXG4gICAgICAgIG5ldyBUYWJiZWRFbGVtZW50KFwiY2hhdC1oaXN0b3J5XCIsIFwiaWNvbnMvY2hhdC5zdmdcIiksXHJcbiAgICAgICAgbmV3IE9yZ2FuaXplclRhYihnYW1lLnN0b3J5TWFuYWdlcilcclxuICAgIF1cclxuICAgIGdhbWUudXNlckludGVyZmFjZS50ZXh0Qm94LnVwZGF0ZVRhYnMoKTtcclxufVxyXG5cclxuLy93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBoaWRlQm90dG9tQmFyKTtcclxuLy93aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgaGlkZUJvdHRvbUJhcik7IiwiaW1wb3J0IHsgU3RvcnlNYW5hZ2VyIH0gZnJvbSBcIi4vc3Rvcnkvc3RvcnktbWFuYWdlclwiO1xyXG5pbXBvcnQgeyBWaXN1YWxzIH0gZnJvbSBcIi4vdmlzdWFsc1wiO1xyXG5pbXBvcnQgeyBVc2VySW50ZXJmYWNlIH0gZnJvbSBcIi4vdXNlci1pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgTG9jYWxpemVyIH0gZnJvbSBcIi4vbG9jYWxpemVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSXJpcyB7XHJcbiAgICBzdG9yeU1hbmFnZXI6IFN0b3J5TWFuYWdlcjtcclxuICAgIHVzZXJJbnRlcmZhY2U6IFVzZXJJbnRlcmZhY2U7XHJcbiAgICB2aXN1YWxzOiBWaXN1YWxzO1xyXG4gICAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICB0b3VjaFN0YXJ0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIGd1aVdyYXBwZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgZmluaXNoZWRMb2FkaW5nOiBib29sZWFuO1xyXG4gICAgaW50ZXJmYWNlSGFzTG9hZGVkOiBib29sZWFuO1xyXG4gICAgc3RvcnlIYXNMb2FkZWQ6IGJvb2xlYW47XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmZpbmlzaGVkTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW50ZXJmYWNlSGFzTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdG9yeUhhc0xvYWRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICB0aGlzLnZpc3VhbHMgPSBuZXcgVmlzdWFscygpO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2FtZVwiKTtcclxuICAgICAgICB0aGlzLmd1aVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZ3VpV3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiaW50ZXJmYWNlLXdyYXBwZXJcIik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZ3VpV3JhcHBlcik7XHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbihldmVudDogVG91Y2hFdmVudCkge1xyXG4gICAgICAgICAgICBldmVudC50b3VjaGVzWzBdLnRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImludGVyYWN0ZWRcIix7fSkpO1xyXG4gICAgICAgICAgICBpZiAoIShldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucyhcImludGVyYWN0YWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZHZhbmNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50b3VjaFN0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudDogRXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudG91Y2hTdGFydGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImludGVyYWN0ZWRcIix7fSkpO1xyXG4gICAgICAgICAgICBpZiAoIShldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5jb250YWlucyhcImludGVyYWN0YWJsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VySW50ZXJmYWNlLnRleHRCb3gpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVzZXJJbnRlcmZhY2UudGV4dEJveC50YWJzT3Blbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWR2YW5jZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBsb2FkU3RvcnkocGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yeU1hbmFnZXIgPSBuZXcgU3RvcnlNYW5hZ2VyKHBhdGgsdGhpcy5zdG9yeUxvYWRlZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGxvY2FsaXphdGlvbkxvYWRlZCh0eXBlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzKTtcclxuICAgICAgICB0aGlzLnVzZXJJbnRlcmZhY2UgPSBuZXcgVXNlckludGVyZmFjZSgpO1xyXG4gICAgICAgIHRoaXMuaW50ZXJmYWNlSGFzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmd1aVdyYXBwZXIuYXBwZW5kQ2hpbGQodGhpcy51c2VySW50ZXJmYWNlLnRleHRCb3guZWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5jaGVja0xvYWRTdGF0dXMoKTtcclxuICAgIH1cclxuICAgIHN0b3J5TG9hZGVkKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3RvcnlIYXNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2hlY2tMb2FkU3RhdHVzKCk7XHJcbiAgICB9XHJcbiAgICBjaGVja0xvYWRTdGF0dXMoKTogdm9pZCB7XHJcbiAgICAgICAgLy90aGlzIGlzIHByb2JhYmx5IGp1c3QgdGVtcG9yYXJ5XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJmYWNlSGFzTG9hZGVkICYmIHRoaXMuc3RvcnlIYXNMb2FkZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5pc2hlZExvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnQoKTogdm9pZCB7XHJcbiAgICAgICAgLy90ZW1wIGNvZGVcclxuICAgICAgICBpZiAoIXRoaXMuc3RvcnlNYW5hZ2VyLmN1ZS5zcGVlY2gpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9yeU1hbmFnZXIuZ29Ub05leHRTcGVlY2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51c2VySW50ZXJmYWNlLnRleHRCb3guc2hvd1RleHQodGhpcy5zdG9yeU1hbmFnZXIuY3VlLmNoYXJhY3RlciwgdGhpcy5zdG9yeU1hbmFnZXIuc3BlZWNoKTtcclxuICAgIH1cclxuICAgIGFkdmFuY2UoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMudXNlckludGVyZmFjZS50ZXh0Qm94LmlzRmluaXNoZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9yeU1hbmFnZXIuZ29Ub05leHRTcGVlY2goKTtcclxuICAgICAgICAgICAgdGhpcy51c2VySW50ZXJmYWNlLnRleHRCb3guc2hvd1RleHQodGhpcy5zdG9yeU1hbmFnZXIuY3VlLmNoYXJhY3RlciwgdGhpcy5zdG9yeU1hbmFnZXIuc3BlZWNoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJJbnRlcmZhY2UudGV4dEJveC5maW5pc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG93U2Nyb2xsTm90aWZpY2F0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHZhciBzY3JvbGxOb3RpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmd1aVdyYXBwZXIuYXBwZW5kQ2hpbGQoc2Nyb2xsTm90aSk7XHJcblxyXG4gICAgICAgIHNjcm9sbE5vdGkudGV4dENvbnRlbnQgPSBcIlNjcm9sbCBEb3duXCI7XHJcbiAgICAgICAgc2Nyb2xsTm90aS5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsLW5vdGlcIixcInBvcFwiLFwidGV4dFwiKTtcclxuICAgICAgICBzY3JvbGxOb3RpLnN0eWxlLnRvcCA9IFwiMTBweFwiO1xyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzY3JvbGxOb3RpLnN0eWxlLnRvcCA9IFwiLTEwMHZoXCI7XHJcbiAgICAgICAgfSw1MDAwKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9zdG9yeVwiO1xyXG5pbXBvcnQgeyBDdWUgfSBmcm9tIFwiLi9jdWVcIjtcclxuaW1wb3J0IHsgQ2hhcHRlciB9IGZyb20gXCIuL2NoYXB0ZXJcIjtcclxuaW1wb3J0IHsgRXBpc29kZSB9IGZyb20gXCIuL2VwaXNvZGVcIjtcclxuaW1wb3J0IHsgRXZpZGVuY2UgfSBmcm9tIFwiLi9ldmlkZW5jZVwiO1xyXG5pbXBvcnQgeyBsb2FkRmlsZSB9IGZyb20gXCIuLi9maWxlLWxvYWRlclwiO1xyXG5pbXBvcnQgeyBMb2NhbGl6ZXIgfSBmcm9tIFwiLi4vbG9jYWxpemVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcnlNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc3Rvcnk6IFN0b3J5O1xyXG4gICAgcHJpdmF0ZSBlcGlzb2RlUG9zaXRpb246IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGNoYXB0ZXJQb3NpdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgY3VlUG9zaXRpb246IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHNwZWVjaFBvc2l0aW9uOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBfZXZpZGVuY2U6IEFycmF5PEV2aWRlbmNlPiA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzdG9yeUxvYWRlZENhbGxiYWNrOiBGdW5jdGlvbjtcclxuICAgIGNvbnN0cnVjdG9yKHBhdGg6IHN0cmluZywgc3RvcnlMb2FkZWRDYWxsYmFjazogRnVuY3Rpb24pIHtcclxuICAgICAgICBsb2FkRmlsZS5iaW5kKHRoaXMpKFwic3RvcnkvbWFpbi1zdG9yeS5qc29uXCIsIHRoaXMuc3RvcnlGaW5pc2hlZExvYWRpbmcsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuc3RvcnlMb2FkZWRDYWxsYmFjayA9IHN0b3J5TG9hZGVkQ2FsbGJhY2s7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy90aGlzLnN0b3J5ID0gPFN0b3J5PihKU09OLnBhcnNlKCd7IFwiZXBpc29kZXNcIjpbIHsgXCJ0aXRsZVwiOlwiVGhlIFNjaWVudGlmaWMgVHVybmFib3V0XCIsIFwiY2hhcHRlcnNcIjpbIHsgXCJ0aXRsZVwiOlwiVHJpYWwgTG9iYnlcIiwgXCJjb250ZW50XCI6WyB7IFwiY2hhcmFjdGVyXCI6XCIkUm9va2llXCIsIFwic3BlZWNoXCI6WyBcIiMjbW9kZSh0aG91Z2h0KShNeSBuYW1lIGlzICRSb29raWUsIGFuZCBJbSBhIGRlZmVuY2UgYXR0b3JuZXkuKVwiLCBcIihNb3JlIHNwZWNpZmljYWxseSwgSSBhbSBhIHNjaWVudGlmaWMgYXR0b3JuZXktLWFuZCB0b2RheSBpcyBteSBmaXJzdCBjYXNlLilcIiBdIH0gXSB9IF0gfSwgeyBcInRpdGxlXCI6XCJUdXJuYWJvdXQgZm9yIEZ1dHVyaXR5XCIsIFwibG9ja2VkXCI6dHJ1ZSB9IF0gfScpKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuc3RvcnkpO1xyXG4gICAgfVxyXG4gICAgc3RvcnlGaW5pc2hlZExvYWRpbmcocmVxdWVzdDogWE1MSHR0cFJlcXVlc3QpOiB2b2lkIHtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc3RvcnkgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICB0aGlzLnN0b3J5TG9hZGVkQ2FsbGJhY2soKTtcclxuICAgIH1cclxuICAgIGdldCBzcGVlY2goKTogc3RyaW5nIHtcclxuICAgICAgICB2YXIgc3BlZWNoID0gdGhpcy5zdG9yeS5lcGlzb2Rlc1t0aGlzLmVwaXNvZGVQb3NpdGlvbl0uY2hhcHRlcnNbdGhpcy5jaGFwdGVyUG9zaXRpb25dLmNvbnRlbnRbdGhpcy5jdWVQb3NpdGlvbl0uc3BlZWNoW3RoaXMuc3BlZWNoUG9zaXRpb25dO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coc3BlZWNoKTtcclxuICAgICAgICByZXR1cm4gc3BlZWNoO1xyXG4gICAgfVxyXG4gICAgZ2V0IGN1ZSgpOiBDdWUge1xyXG4gICAgICAgIHZhciBjdWUgPSB0aGlzLnN0b3J5LmVwaXNvZGVzW3RoaXMuZXBpc29kZVBvc2l0aW9uXS5jaGFwdGVyc1t0aGlzLmNoYXB0ZXJQb3NpdGlvbl0uY29udGVudFt0aGlzLmN1ZVBvc2l0aW9uXTtcclxuICAgICAgICBpZiAoY3VlID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIkVycm9yOiBGb3VuZCBjdWUgdG8gYmUgdW5kZWZpbmVkIVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL2NvbnNvbGUubG9nKGN1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGN1ZTtcclxuICAgIH1cclxuICAgIGdldCBjaGFwdGVyKCk6IENoYXB0ZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3J5LmVwaXNvZGVzW3RoaXMuZXBpc29kZVBvc2l0aW9uXS5jaGFwdGVyc1t0aGlzLmNoYXB0ZXJQb3NpdGlvbl1cclxuICAgIH1cclxuICAgIGdldCBlcGlzb2RlKCk6IEVwaXNvZGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3J5LmVwaXNvZGVzW3RoaXMuZXBpc29kZVBvc2l0aW9uXTtcclxuICAgIH1cclxuICAgIGdldCBldmlkZW5jZSgpOiBBcnJheTxFdmlkZW5jZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9ldmlkZW5jZTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1ZS5ldmlkZW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ldmlkZW5jZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuY3VlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5jdWUuaWQsXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jdWUuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogdGhpcy5jdWUuaW1hZ2UgPyB0aGlzLmN1ZS5pbWFnZSA6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhZHZhbmNlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1ZS5zcGVlY2ggJiYgdGhpcy5jdWUuc3BlZWNoLmxlbmd0aCAtIDEgPiB0aGlzLnNwZWVjaFBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BlZWNoUG9zaXRpb24rKztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBZHZhbmNlZCB0byBuZXh0IHNwZWVjaC4gTmV3IHBvc2l0aW9uOiBcIiArIHRoaXMuc3BlZWNoUG9zaXRpb24pO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY2hhcHRlci5jb250ZW50Lmxlbmd0aCAtIDEgPiB0aGlzLmN1ZVBvc2l0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VlUG9zaXRpb24rKztcclxuICAgICAgICAgICAgdGhpcy5zcGVlY2hQb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWR2YW5jZWQgdG8gbmV4dCBjdWUuXCIpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXBpc29kZS5jaGFwdGVycy5sZW5ndGggPiB0aGlzLmNoYXB0ZXJQb3NpdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmNoYXB0ZXJQb3NpdGlvbisrO1xyXG4gICAgICAgICAgICB0aGlzLnNwZWVjaFBvc2l0aW9uID0gMDtcclxuICAgICAgICAgICAgdGhpcy5jdWVQb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWR2YW5jZWQgdG8gbmV4dCBjaGFwdGVyLlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnb1RvTmV4dFNwZWVjaCgpIHtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5hZHZhbmNlKCk7XHJcbiAgICAgICAgfSB3aGlsZSAoIXRoaXMuY3VlLnNwZWVjaCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVmlzdWFscyB7XHJcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmNsYXNzTGlzdC5hZGQoXCJ2aXN1YWxzXCIpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnJlY3QoMTAsMTAsMjAsMjApO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVGV4dEJveCB9IGZyb20gXCIuL3RleHQtYm94XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlckludGVyZmFjZSB7XHJcbiAgICB0ZXh0Qm94OiBUZXh0Qm94O1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50ZXh0Qm94ID0gbmV3IFRleHRCb3goKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFRhYmJlZEVsZW1lbnQgfSBmcm9tIFwiLi90YWJiZWQtZWxlbWVudFwiO1xyXG5cclxuaW50ZXJmYWNlIFF1ZXVlZENoYXJhY3RlciB7XHJcbiAgICBjaGFyYWN0ZXI6IHN0cmluZztcclxuICAgIG1vZGU6IHN0cmluZztcclxuICAgIHNwZWVkOiBzdHJpbmc7XHJcbiAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgaXNMYXN0Q2hhcmFjdGVyOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dEJveCB7XHJcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHNwZWFrZXJFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHRleHRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIGJsaXBOdW06IG51bWJlcjtcclxuICAgIGlzRmluaXNoZWQ6IGJvb2xlYW47XHJcbiAgICBzaG91bGRTcGVlZFVwOiBib29sZWFuO1xyXG4gICAgdGFiczogQXJyYXk8VGFiYmVkRWxlbWVudD4gPSBbXTtcclxuICAgIHRhYnNFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0XCIsXCJ0ZXh0LWJveFwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGVha2VyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIHRoaXMuc3BlYWtlckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5hbWVcIiwgXCJwb3BcIik7XHJcblxyXG4gICAgICAgIHRoaXMudGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGV4dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRleHQtYmxvY2tcIik7XHJcblxyXG4gICAgICAgIHRoaXMudGFic0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGFic0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhYnNcIik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUYWJzKCk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRhYnNFbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3BlYWtlckVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRleHRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50YWJzRWxlbWVudCk7IFxyXG4gICAgfVxyXG4gICAgdXBkYXRlVGFicygpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy50YWJzRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkgeyB0aGlzLnRhYnNFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLnJlbW92ZSgpOyB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRhYnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy50YWJzRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRhYnNbaV0udGFiRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IHRhYnNPcGVuKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50YWJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRhYnNbaV0uc3RhdGUgPT0gXCJvcGVuZWRcIikge1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRhYnNbaV0uc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMudGV4dEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpIHsgdGhpcy50ZXh0RWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTsgfVxyXG4gICAgICAgIHRoaXMuc3BlYWtlckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuYmxpcE51bSA9IDA7XHJcbiAgICB9XHJcbiAgICBzaG93VGV4dChzcGVha2VyOiBzdHJpbmcsIHRleHQ6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICB0aGlzLmlzRmluaXNoZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5zcGVha2VyRWxlbWVudC50ZXh0Q29udGVudCA9IHNwZWFrZXI7XHJcblxyXG4gICAgICAgIC8vdmFyIHF1ZXVlZENoYXJhY3RlcnM6IEFycmF5PFF1ZXVlZENoYXJhY3Rlcj4gPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIHNwZWVkOiBcImZhc3RcIiB8IFwic2xvd1wiIHwgXCJ2ZXJ5LXNsb3dcIiA9IFwiZmFzdFwiO1xyXG4gICAgICAgIHZhciBtb2RlOiBcInNwZWVjaFwiIHwgXCJ0aG91Z2h0XCIgfCBcImVtcGhhc2lzXCIgfCBcIm9iamVjdFwiIHwgXCJxdWVzdGlvblwiID0gXCJzcGVlY2hcIjtcclxuXHJcbiAgICAgICAgdmFyIHBhcnNlQ2hhciA9IGZ1bmN0aW9uIChpbmRleDogbnVtYmVyKTogb2JqZWN0IHtcclxuICAgICAgICAgICAgdmFyIGNoYXIgPSB0ZXh0W2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKCEoY2hhciA9PSBcIiNcIiAmJiB0ZXh0W2luZGV4ICsgMV0gPT0gXCIjXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBuZXcgUXVldWVkQ2hhcmFjdGVyKHRleHRbaW5kZXhdLCBtb2RlLCBzcGVlZCwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHFjaGFyOiBRdWV1ZWRDaGFyYWN0ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcmFjdGVyOiB0ZXh0W2luZGV4XSxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlOiBtb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiBzcGVlZCxcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYXN0Q2hhcmFjdGVyOiBpbmRleCArIDEgPj0gdGV4dC5sZW5ndGhcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBxY2hhcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9EZXRlcm1pbmluZyB0aGUgY29tbWFuZFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb21tYW5kID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gaW5kZXggKyAyOyB0ZXh0W2ldICE9IFwiKFwiICYmIHRleHQubGVuZ3RoID4gaTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQgKz0gdGV4dFtpXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vRGV0ZXJtaW5pbmcgaXRzIHBhcmFtZXRlcnNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1TdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zOiBBcnJheTxzdHJpbmc+ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyB0ZXh0W2pdICE9IFwiKVwiICYmIHRleHQubGVuZ3RoID4gajsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtU3RyaW5nICs9IHRleHRbal07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcyA9IHBhcmFtU3RyaW5nLnNwbGl0KFwiLFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb21tYW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtb2RlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlID0gcGFyYW1zWzBdIGFzIFwic3BlZWNoXCIgfCBcInRob3VnaHRcIiB8IFwiZW1waGFzaXNcIiB8IFwib2JqZWN0XCIgfCBcInF1ZXN0aW9uXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNwZWVkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVlZCA9IHBhcmFtc1swXSBhcyBcImZhc3RcIiB8IFwic2xvd1wiIHwgXCJ2ZXJ5LXNsb3dcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBqICsgMTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBpbmRleDogaiB9O1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIHBhcnNlIGNvbW1hbmQhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvL3JldHVybiBpbmRleCArIDE7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBuZXh0Q2hhcihpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJpbmRleDogXCIgKyBpbmRleCArIFwiICB0ZXh0IGxlbmd0aDogXCIgKyB0ZXh0Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHZhciBwcmVwYXJlVG9BZGRDaGFyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFyID0gcGFyc2VDaGFyKGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEluZGV4ID0gY2hhci5pbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRleHRCb3guaW5zdGFuY2VPZlF1ZXVlZENoYXJhY3RlcihjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZENoYXIoY2hhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG5leHRDaGFyLmJpbmQodGhpcykobmV4dEluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG91bGRTcGVlZFVwKSB7XHJcbiAgICAgICAgICAgICAgICBwcmVwYXJlVG9BZGRDaGFyKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChwcmVwYXJlVG9BZGRDaGFyLmJpbmQodGhpcyksIFRleHRCb3guZ2V0V2FpdFRpbWUoc3BlZWQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXh0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFyID0gcGFyc2VDaGFyKGkpO1xyXG4gICAgICAgICAgICBpZiAoIVRleHRCb3guaW5zdGFuY2VPZlF1ZXVlZENoYXJhY3RlcihjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgaSA9IGNoYXIuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgY2hhckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRleHRcIiwgbW9kZSwgXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LnRleHRDb250ZW50ID0gdGV4dFtpXTtcclxuICAgICAgICAgICAgY2hhckVsZW1lbnQuZGF0YXNldC5pbmRleCA9IFwiXCIgKyBpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50ZXh0RWxlbWVudC5hcHBlbmRDaGlsZChjaGFyRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXh0Q2hhci5iaW5kKHRoaXMpKDApO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRXYWl0VGltZShzcGVlZDogXCJmYXN0XCIgfCBcInNsb3dcIiB8IFwidmVyeS1zbG93XCIpOiBudW1iZXIge1xyXG4gICAgICAgIHN3aXRjaChzcGVlZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZmFzdFwiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIwO1xyXG4gICAgICAgICAgICBjYXNlIFwic2xvd1wiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDUwO1xyXG4gICAgICAgICAgICBjYXNlIFwidmVyeS1zbG93XCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMjAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgaW5zdGFuY2VPZlF1ZXVlZENoYXJhY3RlcihjaGFyOiBhbnkpOiBjaGFyIGlzIFF1ZXVlZENoYXJhY3RlciB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhjaGFyKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKGNoYXIuY2hhcmFjdGVyICE9PSB1bmRlZmluZWQpO1xyXG4gICAgICAgIHJldHVybiBjaGFyLmNoYXJhY3RlciAhPT0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZENoYXIoY2hhcjogUXVldWVkQ2hhcmFjdGVyKTogdm9pZCB7XHJcbiAgICAgICAgdmFyIGNoYXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltkYXRhLWluZGV4PSdcIiArIGNoYXIuaW5kZXggKyBcIiddXCIpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJyYW5cIik7XHJcbiAgICAgICAgY2hhckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImhpZGRlblwiKTtcclxuICAgICAgICAvKnZhciBjaGFyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0XCIsIG1vZGUpO1xyXG4gICAgICAgIGNoYXJFbGVtZW50LnRleHRDb250ZW50ID0gY2hhcmFjdGVyO1xyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiQWRkZWQ6IFwiICsgY2hhcmFjdGVyKTtcclxuXHJcbiAgICAgICAgdGhpcy50ZXh0RWxlbWVudC5hcHBlbmRDaGlsZChjaGFyRWxlbWVudCk7Ki9cclxuXHJcbiAgICAgICAgdmFyIGlzUHJvbm91bmNlZCA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcclxuXHJcbiAgICAgICAgLy9pZiAoKGNoYXIuc3BlZWQgIT0gXCJmYXN0XCIgfHwgdGhpcy5ibGlwTnVtICUgMiA9PSAwKSAmJiBpc1Byb25vdW5jZWQuaW5jbHVkZXMoY2hhci5jaGFyYWN0ZXIudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgICAgICAgICAgLy9uZXcgQXVkaW8oXCJyZXNvdXJjZXMvRGVlcE1hbGVCbGlwLndhdlwiKS5wbGF5KCk7XHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJQbGF5ZWQgc291bmQsIGJsaXAlOiBcIiArIHRoaXMuYmxpcE51bSAlIDIpO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIHRoaXMuYmxpcE51bSsrO1xyXG4gICAgICAgIGlmIChjaGFyLmNoYXJhY3RlciA9PSBcIiBcIikge1xyXG4gICAgICAgICAgICB0aGlzLmJsaXBOdW0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2hhci5pc0xhc3RDaGFyYWN0ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5pc0ZpbmlzaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRTcGVlZFVwID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZmluaXNoKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2hvdWxkU3BlZWRVcCA9IHRydWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBsb2FkRmlsZSB9IGZyb20gXCIuL2ZpbGUtbG9hZGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTG9jYWxpemVyIHtcclxuICAgIHByaXZhdGUgbG9jYWxpemVkOiB7IFtpbmRleDogc3RyaW5nXTogc3RyaW5nfTtcclxuICAgIHByaXZhdGUgX2xhbmd1YWdlOiBzdHJpbmc7XHJcbiAgICBsb2NhbGl6YXRpb25Mb2FkZWRDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuICAgIGNvbnN0cnVjdG9yKGxhbmd1YWdlOiBzdHJpbmcsIGxvY2FsaXphdGlvbkxvYWRlZENhbGxiYWNrPzogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMubG9jYWxpemF0aW9uTG9hZGVkQ2FsbGJhY2sgPSBsb2NhbGl6YXRpb25Mb2FkZWRDYWxsYmFjaztcclxuICAgICAgICB0aGlzLl9sYW5ndWFnZSA9IGxhbmd1YWdlO1xyXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5sb2NhbGl6ZXIgPSB0aGlzO1xyXG4gICAgICAgIC8qZm9yIChsZXQga2V5IGluIHRoaXMubG9jYWxpemVkKSB7XHJcbiAgICAgICAgICAgIGxvYWRGaWxlLmJpbmQodGhpcykoa2V5ICsgXCIuanNvblwiLCBmdW5jdGlvbihyZXF1ZXN0OiBYTUxIdHRwUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbGl6ZWRba2V5XSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25Mb2FkZWRDYWxsYmFjayhrZXkpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH0qL1xyXG4gICAgICAgIGxvYWRGaWxlLmJpbmQodGhpcykoXCJpbnRlcmZhY2UuanNvblwiLCBmdW5jdGlvbihyZXF1ZXN0OiBYTUxIdHRwUmVxdWVzdCkge1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsaXplZCA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkxvYWRlZENhbGxiYWNrKCk7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGxvY2FsaXplKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxpemVkW25hbWVdO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxhbmd1YWdlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhbmd1YWdlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVGFiYmVkRWxlbWVudCB9IGZyb20gXCIuL3RhYmJlZC1lbGVtZW50XCI7XHJcbmltcG9ydCB7IFN0b3J5TWFuYWdlciB9IGZyb20gXCIuLi9zdG9yeS9zdG9yeS1tYW5hZ2VyXCI7XHJcbmltcG9ydCB7IHJlcGxhY2VFbGVtZW50Q2hpbGRyZW4gfSBmcm9tIFwiLi9jbGVhci1lbGVtZW50XCI7XHJcbmltcG9ydCB7IHJlc29sdmVQYXRoIH0gZnJvbSBcIi4uL2ZpbGUtbG9hZGVyXCI7XHJcbmltcG9ydCB7IEV2aWRlbmNlIH0gZnJvbSBcIi4uL3N0b3J5L2V2aWRlbmNlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgT3JnYW5pemVyVGFiIGV4dGVuZHMgVGFiYmVkRWxlbWVudCB7XHJcbiAgICBldmlkZW5jZUNvbnRhaW5lckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgc3Rvcnk6IFN0b3J5TWFuYWdlcjtcclxuICAgIHNlbGVjdGVkRXZpZGVuY2U6IEV2aWRlbmNlO1xyXG4gICAgY29uc3RydWN0b3Ioc3Rvcnk6IFN0b3J5TWFuYWdlcikge1xyXG4gICAgICAgIHN1cGVyKFwib3JnYW5pemVyXCIsXCJpY29ucy9vcmdhbml6ZXIuc3ZnXCIpO1xyXG4gICAgICAgIHRoaXMuc3RvcnkgPSBzdG9yeTtcclxuICAgICAgICB0aGlzLmJvZHlFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvcmdhbml6ZXJcIik7XHJcbiAgICAgICAgdGhpcy5ldmlkZW5jZUNvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZXZpZGVuY2VDb250YWluZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJldmlkZW5jZS1jb250YWluZXJcIixcInBvcFwiKTtcclxuICAgICAgICB0aGlzLmJvZHlFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuZXZpZGVuY2VDb250YWluZXJFbGVtZW50KTtcclxuICAgIH1cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgcmVwbGFjZUVsZW1lbnRDaGlsZHJlbih0aGlzLmV2aWRlbmNlQ29udGFpbmVyRWxlbWVudCwgdGhpcy5nZXRFdmlkZW5jZUVsZW1lbnRzKCkpXHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG4gICAgZ2V0RXZpZGVuY2VFbGVtZW50cygpOiBBcnJheTxIVE1MRWxlbWVudD4ge1xyXG4gICAgICAgIHZhciBlbGVtZW50czogQXJyYXk8SFRNTEVsZW1lbnQ+ID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnN0b3J5LmV2aWRlbmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBldmlkZW5jZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBldmlkZW5jZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImV2aWRlbmNlXCIsXCJwb3BcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgZXZpZGVuY2VJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIGV2aWRlbmNlSW1hZ2Uuc3JjID0gdGhpcy5zdG9yeS5ldmlkZW5jZVtpXS5pbWFnZSA/IHJlc29sdmVQYXRoKHRoaXMuc3RvcnkuZXZpZGVuY2VbaV0uaW1hZ2UpIDogXCJodHRwczovL3d3dy5zdGFwbGVzLTNwLmNvbS9zNy9pcy9pbWFnZS9TdGFwbGVzL3NwMzYxODgyODZfc2M3P3dpZD01MTImaGVpPTUxMlwiO1xyXG4gICAgICAgICAgICBldmlkZW5jZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZXZpZGVuY2VJbWFnZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZXZpZGVuY2VUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgZXZpZGVuY2VUZXh0LmNsYXNzTGlzdC5hZGQoXCJldmlkZW5jZS10ZXh0XCIpO1xyXG4gICAgICAgICAgICBldmlkZW5jZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZXZpZGVuY2VUZXh0KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBldmlkZW5jZU5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZXZpZGVuY2VOYW1lLnRleHRDb250ZW50ID0gdGhpcy5zdG9yeS5ldmlkZW5jZVtpXS5uYW1lO1xyXG4gICAgICAgICAgICBldmlkZW5jZU5hbWUuY2xhc3NMaXN0LmFkZChcImV2aWRlbmNlLW5hbWVcIik7XHJcbiAgICAgICAgICAgIGV2aWRlbmNlVGV4dC5hcHBlbmRDaGlsZChldmlkZW5jZU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGV2aWRlbmNlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZXZpZGVuY2VEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuc3RvcnkuZXZpZGVuY2VbaV0uZGVzY3JpcHRpb247XHJcbiAgICAgICAgICAgIGV2aWRlbmNlRGVzY3JpcHRpb24uY2xhc3NMaXN0LmFkZChcImV2aWRlbmNlLWRlc2NyaXB0aW9uXCIpO1xyXG4gICAgICAgICAgICBldmlkZW5jZVRleHQuYXBwZW5kQ2hpbGQoZXZpZGVuY2VEZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgICAgICBldmlkZW5jZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImludGVyYWN0YWJsZVwiKTtcclxuICAgICAgICAgICAgZXZpZGVuY2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnRlcmFjdGVkXCIsIGZ1bmN0aW9uKGV2aWRlbmNlOiBFdmlkZW5jZSwgZTogRXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRFdmlkZW5jZSA9IGV2aWRlbmNlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXZpZGVuY2UpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyx0aGlzLnN0b3J5LmV2aWRlbmNlW2ldKSk7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50cy5wdXNoKGV2aWRlbmNlRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGVsZW1lbnRzKTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudHM7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZnVuY3Rpb24gcmVwbGFjZUVsZW1lbnRDaGlsZHJlbihlbGVtZW50OiBIVE1MRWxlbWVudCwgbmV3Q2hpbGRyZW46IEFycmF5PEhUTUxFbGVtZW50Pik6IEhUTUxFbGVtZW50IHtcclxuICAgIHdoaWxlIChlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKSB7IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlKCk7IH1cclxuICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5ld0NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChuZXdDaGlsZHJlbltpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxufSJdLCJzb3VyY2VSb290IjoiIn0=