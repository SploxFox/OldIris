!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){"use strict";function s(e,t=!0){return"resources/"+(t?window.localizer.language+"/":"default/")+e}Object.defineProperty(t,"__esModule",{value:!0}),t.resolvePath=s,t.loadFile=function e(t,i,n=!0){var a=new XMLHttpRequest;a.open("GET",s(t,n),!0),a.onreadystatechange=(()=>{4===a.readyState&&(200==a.status||n&&e.bind(this)(t,i,!1))}).bind(this),a.onload=function(){200==a.status&&i.bind(this)(a)}.bind(this),a.send(null)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);t.TabbedElement=class{constructor(e,t){this.tabName=e,this.labelShown=!1,this.tabElement=document.createElement("div"),this.tabElement.classList.add("tab","pop"),this.tabContentElement=document.createElement("div"),t&&(this.icon=document.createElement("img"),this.icon.src=s.resolvePath(t,!1),this.icon.classList.add("icon"),this.tabContentElement.appendChild(this.icon)),this.tabTextElement=document.createElement("span"),this.tabTextElement.classList.add("tab-label"),this.refreshLabel(),this.tabContentElement.classList.add("tab-content"),this.tabElement.appendChild(this.tabContentElement),this.bodyElement=document.createElement("div"),this.bodyElement.classList.add("tab-body","pop","interactable"),this.tabElement.appendChild(this.bodyElement),this.tabElement.addEventListener("interacted",function(){"opened"==this.state?this.close():this.open()}.bind(this)),this.tabElement.classList.add("interactable"),window.addEventListener("resize",this.refreshLabel.bind(this))}get state(){return this._state}open(){this.tabElement.classList.add("opened"),this._state="opened"}close(){this.tabElement.classList.remove("opened"),this._state="closed"}refreshLabel(){this.icon&&window.innerWidth>500||!this.icon?this.labelShown||this.showLabel():this.labelShown&&this.hideLabel()}showLabel(){this.tabTextElement.textContent=window.localizer.localize(this.tabName),this.tabContentElement.appendChild(this.tabTextElement),console.log("shown"),this.labelShown=!0}hideLabel(){console.log("hidden"),this.tabTextElement.parentNode.removeChild(this.tabTextElement),this.labelShown=!1}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(3),n=i(1),a=i(8),r=i(9);var o=new s.Iris;window.localizer=new a.Localizer("english",function(){o.localizationLoaded.bind(o)(),o.userInterface.textBox.tabs=[new n.TabbedElement("save","icons/save.svg"),new n.TabbedElement("chat-history","icons/chat.svg"),new r.OrganizerTab(o.storyManager)],o.userInterface.textBox.updateTabs()}),o.loadStory("main-story.json"),document.body.appendChild(o.element),(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|(o|a)d)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent))&&(document.body.classList.add("mobile"),document.body.parentElement.classList.add("mobile"),o.showScrollNotification())},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(4),n=i(5),a=i(6);t.Iris=class{constructor(){this.touchStarted=!1,this.finishedLoading=!1,this.interfaceHasLoaded=!1,this.storyHasLoaded=!1,this.visuals=new n.Visuals,this.element=document.createElement("div"),this.element.classList.add("game"),this.guiWrapper=document.createElement("div"),this.guiWrapper.classList.add("interface-wrapper"),this.element.appendChild(this.guiWrapper),window.addEventListener("touchstart",function(e){e.touches[0].target.dispatchEvent(new CustomEvent("interacted",{})),e.target.classList.contains("interactable")||this.advance(),this.touchStarted=!0}.bind(this)),window.addEventListener("click",function(e){this.touchStarted?this.touchStarted=!1:(e.target.dispatchEvent(new CustomEvent("interacted",{})),e.target.classList.contains("interactable")||(console.log(this.userInterface.textBox),this.userInterface.textBox.tabsOpen||this.advance()))}.bind(this))}loadStory(e){this.storyManager=new s.StoryManager(e,this.storyLoaded.bind(this))}localizationLoaded(e){console.log(this),this.userInterface=new a.UserInterface,this.interfaceHasLoaded=!0,this.guiWrapper.appendChild(this.userInterface.textBox.element),this.checkLoadStatus()}storyLoaded(){this.storyHasLoaded=!0,this.checkLoadStatus()}checkLoadStatus(){this.interfaceHasLoaded&&this.storyHasLoaded&&(this.finishedLoading=!0,this.start())}start(){this.storyManager.currentCue.speech||this.storyManager.goToNextSpeech(),this.userInterface.textBox.showText(this.storyManager.currentCue.character,this.storyManager.currentSpeech)}advance(){this.userInterface.textBox.isFinished?(this.storyManager.goToNextSpeech(),this.userInterface.textBox.showText(this.storyManager.currentCue.character,this.storyManager.currentSpeech)):this.userInterface.textBox.finish()}showScrollNotification(){var e=document.createElement("div");this.guiWrapper.appendChild(e),e.textContent="Scroll Down",e.classList.add("scroll-noti","pop","text"),e.style.top="10px",window.setTimeout(function(){e.style.top="-100vh"},5e3)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);t.StoryManager=class{constructor(e,t){this.currentEpisodePosition=0,this.currentChapterPosition=0,this.currentCuePosition=0,this.currentSpeechPosition=0,this._currentEvidence=[],s.loadFile.bind(this)("story/main-story.json",this.storyFinishedLoading,!0),this.storyLoadedCallback=t}storyFinishedLoading(e){this.story=JSON.parse(e.responseText),this.storyLoadedCallback()}get currentSpeech(){return this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition].content[this.currentCuePosition].speech[this.currentSpeechPosition]}get currentCue(){var e=this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition].content[this.currentCuePosition];if(null==e)throw"Error: Found cue to be undefined!";return e}get currentChapter(){return this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition]}get currentEpisode(){return this.story.episodes[this.currentEpisodePosition]}get currentEvidence(){return this._currentEvidence}register(){this.currentCue.evidence&&this._currentEvidence.push({name:this.currentCue.name,id:this.currentCue.id,description:this.currentCue.description,image:this.currentCue.image?this.currentCue.image:void 0})}advance(){this.currentCue.speech&&this.currentCue.speech.length-1>this.currentSpeechPosition?(this.currentSpeechPosition++,console.log("Advanced to next speech. New position: "+this.currentSpeechPosition)):this.currentChapter.content.length-1>this.currentCuePosition?(this.currentCuePosition++,this.currentSpeechPosition=0,console.log("Advanced to next cue.")):this.currentEpisode.chapters.length>this.currentChapterPosition&&(this.currentChapterPosition++,this.currentSpeechPosition=0,this.currentCuePosition=0,console.log("Advanced to next chapter."))}goToNextSpeech(){do{this.register(),this.advance()}while(!this.currentCue.speech)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Visuals=class{constructor(){this.canvas=document.createElement("canvas"),this.canvas.classList.add("visuals"),this.context=this.canvas.getContext("2d"),this.context.rect(10,10,20,20)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(7);t.UserInterface=class{constructor(){this.textBox=new s.TextBox}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class s{constructor(){this.tabs=[],this.element=document.createElement("div"),this.element.classList.add("text","text-box"),this.speakerElement=document.createElement("span"),this.speakerElement.classList.add("name","pop"),this.textElement=document.createElement("div"),this.textElement.classList.add("text-block"),this.tabsElement=document.createElement("div"),this.tabsElement.classList.add("tabs"),this.updateTabs(),this.element.appendChild(this.speakerElement),this.element.appendChild(this.textElement),this.element.appendChild(this.tabsElement)}updateTabs(){for(;this.tabsElement.firstElementChild;)this.tabsElement.firstElementChild.remove();for(var e=0;e<this.tabs.length;e++)this.tabsElement.appendChild(this.tabs[e].tabElement)}get tabsOpen(){for(var e=0;e<this.tabs.length;e++)if("opened"==this.tabs[e].state)return!0;return!1}clear(){for(;this.textElement.firstElementChild;)this.textElement.firstElementChild.remove();this.speakerElement.textContent="",this.blipNum=0}showText(e,t){this.clear(),this.isFinished=!1,this.speakerElement.textContent=e;var i="fast",n="speech",a=function(e){if("#"!=t[e]||"#"!=t[e+1])return{character:t[e],mode:n,speed:i,index:e,isLastCharacter:e+1>=t.length};try{for(var s="",a=e+2;"("!=t[a]&&t.length>a;a++)s+=t[a];for(var r,o="",c=a+1;")"!=t[c]&&t.length>c;c++)o+=t[c];switch(r=o.split(","),s){case"mode":n=r[0];break;case"speed":i=r[0]}return{index:c}}catch(e){console.log("Unable to parse command!"),console.log(e)}}.bind(this);for(var r=0;r<t.length;r++){var o=a(r);if(s.instanceOfQueuedCharacter(o)){var c=document.createElement("span");c.classList.add("text",n,"hidden"),c.textContent=t[r],c.dataset.index=""+r,this.textElement.appendChild(c)}else r=o.index}(function e(n){var r=function(){if(n<t.length){var i=a(n),r=i.index+1;s.instanceOfQueuedCharacter(i)&&this.addChar(i),e.bind(this)(r)}}.bind(this);this.shouldSpeedUp?r():window.setTimeout(r.bind(this),s.getWaitTime(i))}).bind(this)(0)}static getWaitTime(e){switch(e){case"fast":return 20;case"slow":return 50;case"very-slow":return 200}}static instanceOfQueuedCharacter(e){return void 0!==e.character}addChar(e){document.querySelector("[data-index='"+e.index+"']").classList.remove("hidden");this.blipNum++," "==e.character&&(this.blipNum=0),e.isLastCharacter&&(this.isFinished=!0,this.shouldSpeedUp=!1)}finish(){this.shouldSpeedUp=!0}}t.TextBox=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0);t.Localizer=class{constructor(e,t){this.localizationLoadedCallback=t,this._language=e,window.localizer=this,s.loadFile.bind(this)("interface.json",function(e){this.localized=JSON.parse(e.responseText),this.localizationLoadedCallback()}.bind(this))}localize(e){return this.localized[e]}get language(){return this._language}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(1),n=i(10),a=i(0);t.OrganizerTab=class extends s.TabbedElement{constructor(e){super("organizer","icons/organizer.svg"),this.story=e,this.bodyElement.classList.add("organizer"),this.evidenceContainerElement=document.createElement("div"),this.evidenceContainerElement.classList.add("evidence-container","pop"),this.bodyElement.appendChild(this.evidenceContainerElement)}open(){n.replaceElementChildren(this.evidenceContainerElement,this.getEvidenceElements()),super.open()}getEvidenceElements(){for(var e=[],t=0;t<this.story.currentEvidence.length;t++){var i=document.createElement("div");i.classList.add("evidence","pop");var s=document.createElement("img");s.src=this.story.currentEvidence[t].image?a.resolvePath(this.story.currentEvidence[t].image):"https://www.staples-3p.com/s7/is/image/Staples/sp36188286_sc7?wid=512&hei=512",i.appendChild(s);var n=document.createElement("div");n.classList.add("evidence-text"),i.appendChild(n);var r=document.createElement("span");r.textContent=this.story.currentEvidence[t].name,r.classList.add("evidence-name"),n.appendChild(r);var o=document.createElement("span");o.textContent=this.story.currentEvidence[t].description,o.classList.add("evidence-description"),n.appendChild(o),e.push(i)}return console.log(e),e}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceElementChildren=function(e,t){for(;e.firstElementChild;)e.firstElementChild.remove();for(var i=0;i<t.length;i++)e.appendChild(t[i]);return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbGUtbG9hZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS90YWJiZWQtZWxlbWVudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2lyaXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3J5L3N0b3J5LW1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Zpc3VhbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3VzZXItaW50ZXJmYWNlL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS90ZXh0LWJveC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9jYWxpemVyLnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS9vcmdhbml6ZXItdGFiLnRzIiwid2VicGFjazovLy8uL3NyYy91c2VyLWludGVyZmFjZS9jbGVhci1lbGVtZW50LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwicmVzb2x2ZVBhdGgiLCJwYXRoIiwibG9jYWxpemVkIiwid2luZG93IiwibG9jYWxpemVyIiwibGFuZ3VhZ2UiLCJsb2FkRmlsZSIsImNhbGxiYWNrIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJ0aGlzIiwib25sb2FkIiwic2VuZCIsImZpbGVfbG9hZGVyXzEiLCJUYWJiZWRFbGVtZW50IiwiW29iamVjdCBPYmplY3RdIiwidGFiTmFtZSIsImljb24iLCJsYWJlbFNob3duIiwidGFiRWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRhYkNvbnRlbnRFbGVtZW50Iiwic3JjIiwiYXBwZW5kQ2hpbGQiLCJ0YWJUZXh0RWxlbWVudCIsInJlZnJlc2hMYWJlbCIsImJvZHlFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXRlIiwiY2xvc2UiLCJfc3RhdGUiLCJyZW1vdmUiLCJpbm5lcldpZHRoIiwic2hvd0xhYmVsIiwiaGlkZUxhYmVsIiwidGV4dENvbnRlbnQiLCJsb2NhbGl6ZSIsImNvbnNvbGUiLCJsb2ciLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpcmlzXzEiLCJ0YWJiZWRfZWxlbWVudF8xIiwibG9jYWxpemVyXzEiLCJvcmdhbml6ZXJfdGFiXzEiLCJnYW1lIiwiSXJpcyIsIkxvY2FsaXplciIsImxvY2FsaXphdGlvbkxvYWRlZCIsInVzZXJJbnRlcmZhY2UiLCJ0ZXh0Qm94IiwidGFicyIsIk9yZ2FuaXplclRhYiIsInN0b3J5TWFuYWdlciIsInVwZGF0ZVRhYnMiLCJsb2FkU3RvcnkiLCJib2R5IiwiZWxlbWVudCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJwYXJlbnRFbGVtZW50Iiwic2hvd1Njcm9sbE5vdGlmaWNhdGlvbiIsInN0b3J5X21hbmFnZXJfMSIsInZpc3VhbHNfMSIsInVzZXJfaW50ZXJmYWNlXzEiLCJ0b3VjaFN0YXJ0ZWQiLCJmaW5pc2hlZExvYWRpbmciLCJpbnRlcmZhY2VIYXNMb2FkZWQiLCJzdG9yeUhhc0xvYWRlZCIsInZpc3VhbHMiLCJWaXN1YWxzIiwiZ3VpV3JhcHBlciIsImV2ZW50IiwidG91Y2hlcyIsInRhcmdldCIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImNvbnRhaW5zIiwiYWR2YW5jZSIsInRhYnNPcGVuIiwiU3RvcnlNYW5hZ2VyIiwic3RvcnlMb2FkZWQiLCJ0eXBlIiwiVXNlckludGVyZmFjZSIsImNoZWNrTG9hZFN0YXR1cyIsInN0YXJ0IiwiY3VycmVudEN1ZSIsInNwZWVjaCIsImdvVG9OZXh0U3BlZWNoIiwic2hvd1RleHQiLCJjaGFyYWN0ZXIiLCJjdXJyZW50U3BlZWNoIiwiaXNGaW5pc2hlZCIsImZpbmlzaCIsInNjcm9sbE5vdGkiLCJzdHlsZSIsInRvcCIsInNldFRpbWVvdXQiLCJzdG9yeUxvYWRlZENhbGxiYWNrIiwiY3VycmVudEVwaXNvZGVQb3NpdGlvbiIsImN1cnJlbnRDaGFwdGVyUG9zaXRpb24iLCJjdXJyZW50Q3VlUG9zaXRpb24iLCJjdXJyZW50U3BlZWNoUG9zaXRpb24iLCJfY3VycmVudEV2aWRlbmNlIiwic3RvcnlGaW5pc2hlZExvYWRpbmciLCJzdG9yeSIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImVwaXNvZGVzIiwiY2hhcHRlcnMiLCJjb250ZW50IiwiY3VlIiwidW5kZWZpbmVkIiwiY3VycmVudENoYXB0ZXIiLCJjdXJyZW50RXBpc29kZSIsImN1cnJlbnRFdmlkZW5jZSIsImV2aWRlbmNlIiwicHVzaCIsImlkIiwiZGVzY3JpcHRpb24iLCJpbWFnZSIsImxlbmd0aCIsInJlZ2lzdGVyIiwiY2FudmFzIiwiY29udGV4dCIsImdldENvbnRleHQiLCJyZWN0IiwidGV4dF9ib3hfMSIsIlRleHRCb3giLCJzcGVha2VyRWxlbWVudCIsInRleHRFbGVtZW50IiwidGFic0VsZW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImJsaXBOdW0iLCJzcGVha2VyIiwidGV4dCIsImNsZWFyIiwic3BlZWQiLCJwYXJzZUNoYXIiLCJpbmRleCIsImlzTGFzdENoYXJhY3RlciIsImNvbW1hbmQiLCJwYXJhbXMiLCJwYXJhbVN0cmluZyIsImoiLCJzcGxpdCIsImUiLCJjaGFyIiwiaW5zdGFuY2VPZlF1ZXVlZENoYXJhY3RlciIsImNoYXJFbGVtZW50IiwiZGF0YXNldCIsIm5leHRDaGFyIiwicHJlcGFyZVRvQWRkQ2hhciIsIm5leHRJbmRleCIsImFkZENoYXIiLCJzaG91bGRTcGVlZFVwIiwiZ2V0V2FpdFRpbWUiLCJxdWVyeVNlbGVjdG9yIiwibG9jYWxpemF0aW9uTG9hZGVkQ2FsbGJhY2siLCJfbGFuZ3VhZ2UiLCJjbGVhcl9lbGVtZW50XzEiLCJzdXBlciIsImV2aWRlbmNlQ29udGFpbmVyRWxlbWVudCIsInJlcGxhY2VFbGVtZW50Q2hpbGRyZW4iLCJnZXRFdmlkZW5jZUVsZW1lbnRzIiwiZWxlbWVudHMiLCJldmlkZW5jZUVsZW1lbnQiLCJldmlkZW5jZUltYWdlIiwiZXZpZGVuY2VUZXh0IiwiZXZpZGVuY2VOYW1lIiwiZXZpZGVuY2VEZXNjcmlwdGlvbiIsIm5ld0NoaWxkcmVuIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxl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LFFBQVFDLElBQUlpSSxHQUNMQSxtRkMvQ2ZoTixFQUFBOE0sdUJBQUEsU0FBdUM1RyxFQUFzQm9ILEdBQ3pELEtBQU9wSCxFQUFRNkUsbUJBQXFCN0UsRUFBUTZFLGtCQUFrQnZHLFNBQzdELElBQUssSUFBSXRFLEVBQUksRUFBR0EsRUFBSW9OLEVBQVlsRCxPQUFRbEssSUFDckNnRyxFQUFRbEMsWUFBWXNKLEVBQVlwTixJQUVwQyxPQUFPZ0ciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbiIsIi8qZXhwb3J0IGZ1bmN0aW9uIGxvYWRGaWxlKHBhdGg6IHN0cmluZywgY2FsbGJhY2s6IChyZXF1ZXN0OiBYTUxIdHRwUmVxdWVzdCkgPT4gdm9pZCkge1xyXG4gICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHJlcXVlc3Qub3BlbihcIkdFVFwiLCBcInJlc291cmNlcy9cIiArIHBhdGgsIHRydWUpO1xyXG4gICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbih0aGlzOiBYTUxIdHRwUmVxdWVzdCk6IHZvaWQge2NhbGxiYWNrKHRoaXMpfTtcclxuICAgIHJlcXVlc3Quc2VuZChudWxsKVxyXG59Ki9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVQYXRoKHBhdGg6IHN0cmluZywgbG9jYWxpemVkOiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gXCJyZXNvdXJjZXMvXCIgKyAobG9jYWxpemVkID8gKCh3aW5kb3cgYXMgYW55KS5sb2NhbGl6ZXIubGFuZ3VhZ2UgKyBcIi9cIikgOiBcImRlZmF1bHQvXCIpICsgcGF0aDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRGaWxlKHBhdGg6IHN0cmluZywgY2FsbGJhY2s6IChyZXF1ZXN0OiBYTUxIdHRwUmVxdWVzdCkgPT4gdm9pZCwgbG9jYWxpemVkOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgLy9jb25zb2xlLmxvZyh0aGlzKTtcclxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICByZXF1ZXN0Lm9wZW4oXCJHRVRcIiwgcmVzb2x2ZVBhdGgocGF0aCwgbG9jYWxpemVkKSwgdHJ1ZSk7XHJcbiAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCkge1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAvL3N1Y2Nlc3NcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChsb2NhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIGxvYWRGaWxlLmJpbmQodGhpcykocGF0aCwgY2FsbGJhY2ssIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pLmJpbmQodGhpcyk7XHJcbiAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCk6IGFueSB7IFxyXG4gICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgY2FsbGJhY2suYmluZCh0aGlzKShyZXF1ZXN0KVxyXG4gICAgICAgIH1cclxuICAgIH0uYmluZCh0aGlzKTtcclxuICAgIHJlcXVlc3Quc2VuZChudWxsKTtcclxufSIsImltcG9ydCB7IHJlc29sdmVQYXRoIH0gZnJvbSBcIi4uL2ZpbGUtbG9hZGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVGFiYmVkRWxlbWVudCB7XHJcbiAgICB0YWJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIGJvZHlFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHRhYkNvbnRlbnRFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcclxuICAgIF9zdGF0ZTogXCJvcGVuZWRcIiB8IFwiY2xvc2VkXCI7XHJcbiAgICBsYWJlbFNob3duOiBib29sZWFuO1xyXG4gICAgdGFiVGV4dEVsZW1lbnQ6IEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHRhYk5hbWU6IHN0cmluZztcclxuICAgIGljb246IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvciAodGFiTmFtZTogc3RyaW5nLCBpY29uPzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy50YWJOYW1lID0gdGFiTmFtZTtcclxuICAgICAgICB0aGlzLmxhYmVsU2hvd24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRhYkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMudGFiRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiXCIsXCJwb3BcIik7XHJcblxyXG4gICAgICAgIHRoaXMudGFiQ29udGVudEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGlmIChpY29uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIHRoaXMuaWNvbi5zcmMgPSByZXNvbHZlUGF0aChpY29uLGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5pY29uLmNsYXNzTGlzdC5hZGQoXCJpY29uXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRhYkNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaWNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMudGFiVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aGlzLnRhYlRleHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWItbGFiZWxcIik7XHJcblxyXG4gICAgICAgIHRoaXMucmVmcmVzaExhYmVsKCk7XHJcblxyXG4gICAgICAgIHRoaXMudGFiQ29udGVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRhYi1jb250ZW50XCIpO1xyXG4gICAgICAgIHRoaXMudGFiRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRhYkNvbnRlbnRFbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5ib2R5RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5ib2R5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGFiLWJvZHlcIixcInBvcFwiLFwiaW50ZXJhY3RhYmxlXCIpO1xyXG4gICAgICAgIHRoaXMudGFiRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmJvZHlFbGVtZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy50YWJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnRlcmFjdGVkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBcIm9wZW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy50YWJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJpbnRlcmFjdGFibGVcIik7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgdGhpcy5yZWZyZXNoTGFiZWwuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgc3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50YWJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBcIm9wZW5lZFwiO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50YWJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBcImNsb3NlZFwiO1xyXG4gICAgfVxyXG4gICAgcmVmcmVzaExhYmVsKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICgoKHRoaXMuaWNvbiAmJiB3aW5kb3cuaW5uZXJXaWR0aCA+IDUwMCkgfHwgIXRoaXMuaWNvbikpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmxhYmVsU2hvd24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xhYmVsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubGFiZWxTaG93bikge1xyXG4gICAgICAgICAgICB0aGlzLmhpZGVMYWJlbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3dMYWJlbCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnRhYlRleHRFbGVtZW50LnRleHRDb250ZW50ID0gKCh3aW5kb3cgYXMgYW55KS5sb2NhbGl6ZXIubG9jYWxpemUodGhpcy50YWJOYW1lKSk7XHJcbiAgICAgICAgdGhpcy50YWJDb250ZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnRhYlRleHRFbGVtZW50KTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcInNob3duXCIpO1xyXG4gICAgICAgIHRoaXMubGFiZWxTaG93biA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBoaWRlTGFiZWwoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJoaWRkZW5cIik7XHJcbiAgICAgICAgdGhpcy50YWJUZXh0RWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMudGFiVGV4dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMubGFiZWxTaG93biA9IGZhbHNlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgSXJpcyB9IGZyb20gXCIuL2lyaXNcIjtcclxuaW1wb3J0IHsgVGFiYmVkRWxlbWVudCB9IGZyb20gXCIuL3VzZXItaW50ZXJmYWNlL3RhYmJlZC1lbGVtZW50XCI7XHJcbmltcG9ydCB7IExvY2FsaXplciB9IGZyb20gXCIuL2xvY2FsaXplclwiO1xyXG5pbXBvcnQgeyBPcmdhbml6ZXJUYWIgfSBmcm9tIFwiLi91c2VyLWludGVyZmFjZS9vcmdhbml6ZXItdGFiXCI7XHJcblxyXG5cclxuLy9UaGUgb3JkZXIgb2YgdGhlIGNyZWF0aW9uIG9mIHRoZSBsb2NhbGl6ZXIgYW5kIGdhbWUgbWF5IGNyZWF0ZSBhIHJhY2UgY29uZGl0aW9uLlxyXG52YXIgZ2FtZSA9IG5ldyBJcmlzKCk7XHJcbih3aW5kb3cgYXMgYW55KS5sb2NhbGl6ZXIgPSBuZXcgTG9jYWxpemVyKFwiZW5nbGlzaFwiLCBsb2NMb2FkZWQpO1xyXG5nYW1lLmxvYWRTdG9yeShcIm1haW4tc3RvcnkuanNvblwiKTtcclxuXHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZ2FtZS5lbGVtZW50KTtcclxuXHJcbmlmICgvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXwob3xhKWQpfGlyaXN8a2luZGxlfGxnZSB8bWFlbW98bWlkcHxtbXB8bW9iaWxlLitmaXJlZm94fG5ldGZyb250fG9wZXJhIG0ob2J8aW4paXxwYWxtKCBvcyk/fHBob25lfHAoaXhpfHJlKVxcL3xwbHVja2VyfHBvY2tldHxwc3B8c2VyaWVzKDR8NikwfHN5bWJpYW58dHJlb3x1cFxcLihicm93c2VyfGxpbmspfHZvZGFmb25lfHdhcHx3aW5kb3dzIGNlfHhkYXx4aWluby9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl8fC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibW9iaWxlXCIpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2JpbGVcIik7XHJcbiAgICBnYW1lLnNob3dTY3JvbGxOb3RpZmljYXRpb24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9jTG9hZGVkKCkge1xyXG4gICAgZ2FtZS5sb2NhbGl6YXRpb25Mb2FkZWQuYmluZChnYW1lKSgpO1xyXG4gICAgZ2FtZS51c2VySW50ZXJmYWNlLnRleHRCb3gudGFicyA9IFtcclxuICAgICAgICBuZXcgVGFiYmVkRWxlbWVudChcInNhdmVcIiwgXCJpY29ucy9zYXZlLnN2Z1wiKSxcclxuICAgICAgICBuZXcgVGFiYmVkRWxlbWVudChcImNoYXQtaGlzdG9yeVwiLCBcImljb25zL2NoYXQuc3ZnXCIpLFxyXG4gICAgICAgIG5ldyBPcmdhbml6ZXJUYWIoZ2FtZS5zdG9yeU1hbmFnZXIpXHJcbiAgICBdXHJcbiAgICBnYW1lLnVzZXJJbnRlcmZhY2UudGV4dEJveC51cGRhdGVUYWJzKCk7XHJcbn1cclxuXHJcbi8vd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgaGlkZUJvdHRvbUJhcik7XHJcbi8vd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGhpZGVCb3R0b21CYXIpOyIsImltcG9ydCB7IFN0b3J5TWFuYWdlciB9IGZyb20gXCIuL3N0b3J5L3N0b3J5LW1hbmFnZXJcIjtcclxuaW1wb3J0IHsgVmlzdWFscyB9IGZyb20gXCIuL3Zpc3VhbHNcIjtcclxuaW1wb3J0IHsgVXNlckludGVyZmFjZSB9IGZyb20gXCIuL3VzZXItaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IExvY2FsaXplciB9IGZyb20gXCIuL2xvY2FsaXplclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIElyaXMge1xyXG4gICAgc3RvcnlNYW5hZ2VyOiBTdG9yeU1hbmFnZXI7XHJcbiAgICB1c2VySW50ZXJmYWNlOiBVc2VySW50ZXJmYWNlO1xyXG4gICAgdmlzdWFsczogVmlzdWFscztcclxuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgdG91Y2hTdGFydGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBndWlXcmFwcGVyOiBIVE1MRWxlbWVudDtcclxuICAgIGZpbmlzaGVkTG9hZGluZzogYm9vbGVhbjtcclxuICAgIGludGVyZmFjZUhhc0xvYWRlZDogYm9vbGVhbjtcclxuICAgIHN0b3J5SGFzTG9hZGVkOiBib29sZWFuO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5maW5pc2hlZExvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmludGVyZmFjZUhhc0xvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuc3RvcnlIYXNMb2FkZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy52aXN1YWxzID0gbmV3IFZpc3VhbHMoKTtcclxuXHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdhbWVcIik7XHJcbiAgICAgICAgdGhpcy5ndWlXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmd1aVdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImludGVyZmFjZS13cmFwcGVyXCIpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLmd1aVdyYXBwZXIpO1xyXG5cclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgZnVuY3Rpb24oZXZlbnQ6IFRvdWNoRXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQudG91Y2hlc1swXS50YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJpbnRlcmFjdGVkXCIse30pKTtcclxuICAgICAgICAgICAgaWYgKCEoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuY29udGFpbnMoXCJpbnRlcmFjdGFibGVcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWR2YW5jZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hTdGFydGVkID0gdHJ1ZTtcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRvdWNoU3RhcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFN0YXJ0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudC50YXJnZXQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJpbnRlcmFjdGVkXCIse30pKTtcclxuICAgICAgICAgICAgaWYgKCEoZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuY29udGFpbnMoXCJpbnRlcmFjdGFibGVcIikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudXNlckludGVyZmFjZS50ZXh0Qm94KTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy51c2VySW50ZXJmYWNlLnRleHRCb3gudGFic09wZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkdmFuY2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgbG9hZFN0b3J5KHBhdGg6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc3RvcnlNYW5hZ2VyID0gbmV3IFN0b3J5TWFuYWdlcihwYXRoLHRoaXMuc3RvcnlMb2FkZWQuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBsb2NhbGl6YXRpb25Mb2FkZWQodHlwZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcyk7XHJcbiAgICAgICAgdGhpcy51c2VySW50ZXJmYWNlID0gbmV3IFVzZXJJbnRlcmZhY2UoKTtcclxuICAgICAgICB0aGlzLmludGVyZmFjZUhhc0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5ndWlXcmFwcGVyLmFwcGVuZENoaWxkKHRoaXMudXNlckludGVyZmFjZS50ZXh0Qm94LmVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tMb2FkU3RhdHVzKCk7XHJcbiAgICB9XHJcbiAgICBzdG9yeUxvYWRlZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3J5SGFzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmNoZWNrTG9hZFN0YXR1cygpO1xyXG4gICAgfVxyXG4gICAgY2hlY2tMb2FkU3RhdHVzKCk6IHZvaWQge1xyXG4gICAgICAgIC8vdGhpcyBpcyBwcm9iYWJseSBqdXN0IHRlbXBvcmFyeVxyXG4gICAgICAgIGlmICh0aGlzLmludGVyZmFjZUhhc0xvYWRlZCAmJiB0aGlzLnN0b3J5SGFzTG9hZGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluaXNoZWRMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0KCk6IHZvaWQge1xyXG4gICAgICAgIC8vdGVtcCBjb2RlXHJcbiAgICAgICAgaWYgKCF0aGlzLnN0b3J5TWFuYWdlci5jdXJyZW50Q3VlLnNwZWVjaCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3J5TWFuYWdlci5nb1RvTmV4dFNwZWVjaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVzZXJJbnRlcmZhY2UudGV4dEJveC5zaG93VGV4dCh0aGlzLnN0b3J5TWFuYWdlci5jdXJyZW50Q3VlLmNoYXJhY3RlciwgdGhpcy5zdG9yeU1hbmFnZXIuY3VycmVudFNwZWVjaCk7XHJcbiAgICB9XHJcbiAgICBhZHZhbmNlKCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLnVzZXJJbnRlcmZhY2UudGV4dEJveC5pc0ZpbmlzaGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcnlNYW5hZ2VyLmdvVG9OZXh0U3BlZWNoKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXNlckludGVyZmFjZS50ZXh0Qm94LnNob3dUZXh0KHRoaXMuc3RvcnlNYW5hZ2VyLmN1cnJlbnRDdWUuY2hhcmFjdGVyLCB0aGlzLnN0b3J5TWFuYWdlci5jdXJyZW50U3BlZWNoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVzZXJJbnRlcmZhY2UudGV4dEJveC5maW5pc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzaG93U2Nyb2xsTm90aWZpY2F0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHZhciBzY3JvbGxOb3RpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLmd1aVdyYXBwZXIuYXBwZW5kQ2hpbGQoc2Nyb2xsTm90aSk7XHJcblxyXG4gICAgICAgIHNjcm9sbE5vdGkudGV4dENvbnRlbnQgPSBcIlNjcm9sbCBEb3duXCI7XHJcbiAgICAgICAgc2Nyb2xsTm90aS5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsLW5vdGlcIixcInBvcFwiLFwidGV4dFwiKTtcclxuICAgICAgICBzY3JvbGxOb3RpLnN0eWxlLnRvcCA9IFwiMTBweFwiO1xyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzY3JvbGxOb3RpLnN0eWxlLnRvcCA9IFwiLTEwMHZoXCI7XHJcbiAgICAgICAgfSw1MDAwKVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9zdG9yeVwiO1xyXG5pbXBvcnQgeyBDdWUgfSBmcm9tIFwiLi9jdWVcIjtcclxuaW1wb3J0IHsgQ2hhcHRlciB9IGZyb20gXCIuL2NoYXB0ZXJcIjtcclxuaW1wb3J0IHsgRXBpc29kZSB9IGZyb20gXCIuL2VwaXNvZGVcIjtcclxuaW1wb3J0IHsgRXZpZGVuY2UgfSBmcm9tIFwiLi9ldmlkZW5jZVwiO1xyXG5pbXBvcnQgeyBsb2FkRmlsZSB9IGZyb20gXCIuLi9maWxlLWxvYWRlclwiO1xyXG5pbXBvcnQgeyBMb2NhbGl6ZXIgfSBmcm9tIFwiLi4vbG9jYWxpemVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RvcnlNYW5hZ2VyIHtcclxuICAgIHByaXZhdGUgc3Rvcnk6IFN0b3J5O1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50RXBpc29kZVBvc2l0aW9uOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50Q2hhcHRlclBvc2l0aW9uOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBjdXJyZW50Q3VlUG9zaXRpb246IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIGN1cnJlbnRTcGVlY2hQb3NpdGlvbjogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgX2N1cnJlbnRFdmlkZW5jZTogQXJyYXk8RXZpZGVuY2U+ID0gW107XHJcbiAgICBwcml2YXRlIHN0b3J5TG9hZGVkQ2FsbGJhY2s6IEZ1bmN0aW9uO1xyXG4gICAgY29uc3RydWN0b3IocGF0aDogc3RyaW5nLCBzdG9yeUxvYWRlZENhbGxiYWNrOiBGdW5jdGlvbikge1xyXG4gICAgICAgIGxvYWRGaWxlLmJpbmQodGhpcykoXCJzdG9yeS9tYWluLXN0b3J5Lmpzb25cIiwgdGhpcy5zdG9yeUZpbmlzaGVkTG9hZGluZywgdHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5zdG9yeUxvYWRlZENhbGxiYWNrID0gc3RvcnlMb2FkZWRDYWxsYmFjaztcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICBcclxuICAgICAgICAvL3RoaXMuc3RvcnkgPSA8U3Rvcnk+KEpTT04ucGFyc2UoJ3sgXCJlcGlzb2Rlc1wiOlsgeyBcInRpdGxlXCI6XCJUaGUgU2NpZW50aWZpYyBUdXJuYWJvdXRcIiwgXCJjaGFwdGVyc1wiOlsgeyBcInRpdGxlXCI6XCJUcmlhbCBMb2JieVwiLCBcImNvbnRlbnRcIjpbIHsgXCJjaGFyYWN0ZXJcIjpcIiRSb29raWVcIiwgXCJzcGVlY2hcIjpbIFwiIyNtb2RlKHRob3VnaHQpKE15IG5hbWUgaXMgJFJvb2tpZSwgYW5kIEltIGEgZGVmZW5jZSBhdHRvcm5leS4pXCIsIFwiKE1vcmUgc3BlY2lmaWNhbGx5LCBJIGFtIGEgc2NpZW50aWZpYyBhdHRvcm5leS0tYW5kIHRvZGF5IGlzIG15IGZpcnN0IGNhc2UuKVwiIF0gfSBdIH0gXSB9LCB7IFwidGl0bGVcIjpcIlR1cm5hYm91dCBmb3IgRnV0dXJpdHlcIiwgXCJsb2NrZWRcIjp0cnVlIH0gXSB9JykpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcy5zdG9yeSk7XHJcbiAgICB9XHJcbiAgICBzdG9yeUZpbmlzaGVkTG9hZGluZyhyZXF1ZXN0OiBYTUxIdHRwUmVxdWVzdCk6IHZvaWQge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcyk7XHJcbiAgICAgICAgdGhpcy5zdG9yeSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIHRoaXMuc3RvcnlMb2FkZWRDYWxsYmFjaygpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGN1cnJlbnRTcGVlY2goKTogc3RyaW5nIHtcclxuICAgICAgICB2YXIgc3BlZWNoID0gdGhpcy5zdG9yeS5lcGlzb2Rlc1t0aGlzLmN1cnJlbnRFcGlzb2RlUG9zaXRpb25dLmNoYXB0ZXJzW3RoaXMuY3VycmVudENoYXB0ZXJQb3NpdGlvbl0uY29udGVudFt0aGlzLmN1cnJlbnRDdWVQb3NpdGlvbl0uc3BlZWNoW3RoaXMuY3VycmVudFNwZWVjaFBvc2l0aW9uXTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKHNwZWVjaCk7XHJcbiAgICAgICAgcmV0dXJuIHNwZWVjaDtcclxuICAgIH1cclxuICAgIGdldCBjdXJyZW50Q3VlKCk6IEN1ZSB7XHJcbiAgICAgICAgdmFyIGN1ZSA9IHRoaXMuc3RvcnkuZXBpc29kZXNbdGhpcy5jdXJyZW50RXBpc29kZVBvc2l0aW9uXS5jaGFwdGVyc1t0aGlzLmN1cnJlbnRDaGFwdGVyUG9zaXRpb25dLmNvbnRlbnRbdGhpcy5jdXJyZW50Q3VlUG9zaXRpb25dO1xyXG4gICAgICAgIGlmIChjdWUgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IFwiRXJyb3I6IEZvdW5kIGN1ZSB0byBiZSB1bmRlZmluZWQhXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vY29uc29sZS5sb2coY3VlKTtcclxuICAgICAgICByZXR1cm4gY3VlO1xyXG4gICAgfVxyXG4gICAgZ2V0IGN1cnJlbnRDaGFwdGVyKCk6IENoYXB0ZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3J5LmVwaXNvZGVzW3RoaXMuY3VycmVudEVwaXNvZGVQb3NpdGlvbl0uY2hhcHRlcnNbdGhpcy5jdXJyZW50Q2hhcHRlclBvc2l0aW9uXVxyXG4gICAgfVxyXG4gICAgZ2V0IGN1cnJlbnRFcGlzb2RlKCk6IEVwaXNvZGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3J5LmVwaXNvZGVzW3RoaXMuY3VycmVudEVwaXNvZGVQb3NpdGlvbl07XHJcbiAgICB9XHJcbiAgICBnZXQgY3VycmVudEV2aWRlbmNlKCk6IEFycmF5PEV2aWRlbmNlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRFdmlkZW5jZTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDdWUuZXZpZGVuY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudEV2aWRlbmNlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5jdXJyZW50Q3VlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBpZDogdGhpcy5jdXJyZW50Q3VlLmlkLFxyXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY3VycmVudEN1ZS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgIGltYWdlOiB0aGlzLmN1cnJlbnRDdWUuaW1hZ2UgPyB0aGlzLmN1cnJlbnRDdWUuaW1hZ2UgOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWR2YW5jZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q3VlLnNwZWVjaCAmJiB0aGlzLmN1cnJlbnRDdWUuc3BlZWNoLmxlbmd0aCAtIDEgPiB0aGlzLmN1cnJlbnRTcGVlY2hQb3NpdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTcGVlY2hQb3NpdGlvbisrO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFkdmFuY2VkIHRvIG5leHQgc3BlZWNoLiBOZXcgcG9zaXRpb246IFwiICsgdGhpcy5jdXJyZW50U3BlZWNoUG9zaXRpb24pO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudENoYXB0ZXIuY29udGVudC5sZW5ndGggLSAxID4gdGhpcy5jdXJyZW50Q3VlUG9zaXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q3VlUG9zaXRpb24rKztcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3BlZWNoUG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFkdmFuY2VkIHRvIG5leHQgY3VlLlwiKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnRFcGlzb2RlLmNoYXB0ZXJzLmxlbmd0aCA+IHRoaXMuY3VycmVudENoYXB0ZXJQb3NpdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDaGFwdGVyUG9zaXRpb24rKztcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3BlZWNoUG9zaXRpb24gPSAwO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDdWVQb3NpdGlvbiA9IDA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWR2YW5jZWQgdG8gbmV4dCBjaGFwdGVyLlwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnb1RvTmV4dFNwZWVjaCgpIHtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5hZHZhbmNlKCk7XHJcbiAgICAgICAgfSB3aGlsZSAoIXRoaXMuY3VycmVudEN1ZS5zcGVlY2gpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFZpc3VhbHMge1xyXG4gICAgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5jbGFzc0xpc3QuYWRkKFwidmlzdWFsc1wiKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5yZWN0KDEwLDEwLDIwLDIwKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFRleHRCb3ggfSBmcm9tIFwiLi90ZXh0LWJveFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFVzZXJJbnRlcmZhY2Uge1xyXG4gICAgdGV4dEJveDogVGV4dEJveDtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudGV4dEJveCA9IG5ldyBUZXh0Qm94KCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBUYWJiZWRFbGVtZW50IH0gZnJvbSBcIi4vdGFiYmVkLWVsZW1lbnRcIjtcclxuXHJcbmludGVyZmFjZSBRdWV1ZWRDaGFyYWN0ZXIge1xyXG4gICAgY2hhcmFjdGVyOiBzdHJpbmc7XHJcbiAgICBtb2RlOiBzdHJpbmc7XHJcbiAgICBzcGVlZDogc3RyaW5nO1xyXG4gICAgaW5kZXg6IG51bWJlcjtcclxuICAgIGlzTGFzdENoYXJhY3RlcjogYm9vbGVhbjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRCb3gge1xyXG4gICAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBzcGVha2VyRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICB0ZXh0RWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBibGlwTnVtOiBudW1iZXI7XHJcbiAgICBpc0ZpbmlzaGVkOiBib29sZWFuO1xyXG4gICAgc2hvdWxkU3BlZWRVcDogYm9vbGVhbjtcclxuICAgIHRhYnM6IEFycmF5PFRhYmJlZEVsZW1lbnQ+ID0gW107XHJcbiAgICB0YWJzRWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGV4dFwiLFwidGV4dC1ib3hcIik7XHJcblxyXG4gICAgICAgIHRoaXMuc3BlYWtlckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICB0aGlzLnNwZWFrZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJuYW1lXCIsIFwicG9wXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnRleHRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRleHRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWJsb2NrXCIpO1xyXG5cclxuICAgICAgICB0aGlzLnRhYnNFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLnRhYnNFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0YWJzXCIpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2codGhpcy50YWJzRWxlbWVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnNwZWFrZXJFbGVtZW50KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50ZXh0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudGFic0VsZW1lbnQpOyBcclxuICAgIH1cclxuICAgIHVwZGF0ZVRhYnMoKSB7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMudGFic0VsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpIHsgdGhpcy50YWJzRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTsgfVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50YWJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFic0VsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy50YWJzW2ldLnRhYkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCB0YWJzT3BlbigpOiBib29sZWFuIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGFicy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50YWJzW2ldLnN0YXRlID09IFwib3BlbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy50YWJzW2ldLnN0YXRlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNsZWFyKCkge1xyXG4gICAgICAgIHdoaWxlICh0aGlzLnRleHRFbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKSB7IHRoaXMudGV4dEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQucmVtb3ZlKCk7IH1cclxuICAgICAgICB0aGlzLnNwZWFrZXJFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICB0aGlzLmJsaXBOdW0gPSAwO1xyXG4gICAgfVxyXG4gICAgc2hvd1RleHQoc3BlYWtlcjogc3RyaW5nLCB0ZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5pc0ZpbmlzaGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuc3BlYWtlckVsZW1lbnQudGV4dENvbnRlbnQgPSBzcGVha2VyO1xyXG5cclxuICAgICAgICAvL3ZhciBxdWV1ZWRDaGFyYWN0ZXJzOiBBcnJheTxRdWV1ZWRDaGFyYWN0ZXI+ID0gW107XHJcblxyXG4gICAgICAgIHZhciBzcGVlZDogXCJmYXN0XCIgfCBcInNsb3dcIiB8IFwidmVyeS1zbG93XCIgPSBcImZhc3RcIjtcclxuICAgICAgICB2YXIgbW9kZTogXCJzcGVlY2hcIiB8IFwidGhvdWdodFwiIHwgXCJlbXBoYXNpc1wiIHwgXCJvYmplY3RcIiB8IFwicXVlc3Rpb25cIiA9IFwic3BlZWNoXCI7XHJcblxyXG4gICAgICAgIHZhciBwYXJzZUNoYXIgPSBmdW5jdGlvbiAoaW5kZXg6IG51bWJlcik6IG9iamVjdCB7XHJcbiAgICAgICAgICAgIHZhciBjaGFyID0gdGV4dFtpbmRleF07XHJcbiAgICAgICAgICAgIGlmICghKGNoYXIgPT0gXCIjXCIgJiYgdGV4dFtpbmRleCArIDFdID09IFwiI1wiKSkge1xyXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gbmV3IFF1ZXVlZENoYXJhY3Rlcih0ZXh0W2luZGV4XSwgbW9kZSwgc3BlZWQsIGluZGV4KTtcclxuICAgICAgICAgICAgICAgIHZhciBxY2hhcjogUXVldWVkQ2hhcmFjdGVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJhY3RlcjogdGV4dFtpbmRleF0sXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogbW9kZSxcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogc3BlZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTGFzdENoYXJhY3RlcjogaW5kZXggKyAxID49IHRleHQubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcWNoYXI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vRGV0ZXJtaW5pbmcgdGhlIGNvbW1hbmRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWFuZCA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGluZGV4ICsgMjsgdGV4dFtpXSAhPSBcIihcIiAmJiB0ZXh0Lmxlbmd0aCA+IGk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kICs9IHRleHRbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL0RldGVybWluaW5nIGl0cyBwYXJhbWV0ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtU3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtczogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgdGV4dFtqXSAhPSBcIilcIiAmJiB0ZXh0Lmxlbmd0aCA+IGo7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbVN0cmluZyArPSB0ZXh0W2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSBwYXJhbVN0cmluZy5zcGxpdChcIixcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29tbWFuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibW9kZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZSA9IHBhcmFtc1swXSBhcyBcInNwZWVjaFwiIHwgXCJ0aG91Z2h0XCIgfCBcImVtcGhhc2lzXCIgfCBcIm9iamVjdFwiIHwgXCJxdWVzdGlvblwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzcGVlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlZWQgPSBwYXJhbXNbMF0gYXMgXCJmYXN0XCIgfCBcInNsb3dcIiB8IFwidmVyeS1zbG93XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gaiArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaW5kZXg6IGogfTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVuYWJsZSB0byBwYXJzZSBjb21tYW5kIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9yZXR1cm4gaW5kZXggKyAxO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbmV4dENoYXIoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiaW5kZXg6IFwiICsgaW5kZXggKyBcIiAgdGV4dCBsZW5ndGg6IFwiICsgdGV4dC5sZW5ndGgpO1xyXG4gICAgICAgICAgICB2YXIgcHJlcGFyZVRvQWRkQ2hhciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgdGV4dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY2hhciA9IHBhcnNlQ2hhcihpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRJbmRleCA9IGNoYXIuaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChUZXh0Qm94Lmluc3RhbmNlT2ZRdWV1ZWRDaGFyYWN0ZXIoY2hhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDaGFyKGNoYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBuZXh0Q2hhci5iaW5kKHRoaXMpKG5leHRJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkU3BlZWRVcCkge1xyXG4gICAgICAgICAgICAgICAgcHJlcGFyZVRvQWRkQ2hhcigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQocHJlcGFyZVRvQWRkQ2hhci5iaW5kKHRoaXMpLCBUZXh0Qm94LmdldFdhaXRUaW1lKHNwZWVkKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgY2hhciA9IHBhcnNlQ2hhcihpKTtcclxuICAgICAgICAgICAgaWYgKCFUZXh0Qm94Lmluc3RhbmNlT2ZRdWV1ZWRDaGFyYWN0ZXIoY2hhcikpIHtcclxuICAgICAgICAgICAgICAgIGkgPSBjaGFyLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGNoYXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XHJcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0ZXh0XCIsIG1vZGUsIFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHRbaV07XHJcbiAgICAgICAgICAgIGNoYXJFbGVtZW50LmRhdGFzZXQuaW5kZXggPSBcIlwiICsgaTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGV4dEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hhckVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmV4dENoYXIuYmluZCh0aGlzKSgwKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0V2FpdFRpbWUoc3BlZWQ6IFwiZmFzdFwiIHwgXCJzbG93XCIgfCBcInZlcnktc2xvd1wiKTogbnVtYmVyIHtcclxuICAgICAgICBzd2l0Y2goc3BlZWQpIHtcclxuICAgICAgICAgICAgY2FzZSBcImZhc3RcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiAyMDtcclxuICAgICAgICAgICAgY2FzZSBcInNsb3dcIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiA1MDtcclxuICAgICAgICAgICAgY2FzZSBcInZlcnktc2xvd1wiOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIwMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGluc3RhbmNlT2ZRdWV1ZWRDaGFyYWN0ZXIoY2hhcjogYW55KTogY2hhciBpcyBRdWV1ZWRDaGFyYWN0ZXIge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coY2hhcik7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhjaGFyLmNoYXJhY3RlciAhPT0gdW5kZWZpbmVkKTtcclxuICAgICAgICByZXR1cm4gY2hhci5jaGFyYWN0ZXIgIT09IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDaGFyKGNoYXI6IFF1ZXVlZENoYXJhY3Rlcik6IHZvaWQge1xyXG4gICAgICAgIHZhciBjaGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1pbmRleD0nXCIgKyBjaGFyLmluZGV4ICsgXCInXVwiKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwicmFuXCIpO1xyXG4gICAgICAgIGNoYXJFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRkZW5cIik7XHJcbiAgICAgICAgLyp2YXIgY2hhckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICBjaGFyRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwidGV4dFwiLCBtb2RlKTtcclxuICAgICAgICBjaGFyRWxlbWVudC50ZXh0Q29udGVudCA9IGNoYXJhY3RlcjtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIkFkZGVkOiBcIiArIGNoYXJhY3Rlcik7XHJcblxyXG4gICAgICAgIHRoaXMudGV4dEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hhckVsZW1lbnQpOyovXHJcblxyXG4gICAgICAgIHZhciBpc1Byb25vdW5jZWQgPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCI7XHJcblxyXG4gICAgICAgIC8vaWYgKChjaGFyLnNwZWVkICE9IFwiZmFzdFwiIHx8IHRoaXMuYmxpcE51bSAlIDIgPT0gMCkgJiYgaXNQcm9ub3VuY2VkLmluY2x1ZGVzKGNoYXIuY2hhcmFjdGVyLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAgICAgICAgIC8vbmV3IEF1ZGlvKFwicmVzb3VyY2VzL0RlZXBNYWxlQmxpcC53YXZcIikucGxheSgpO1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiUGxheWVkIHNvdW5kLCBibGlwJTogXCIgKyB0aGlzLmJsaXBOdW0gJSAyKTtcclxuICAgICAgICAvL31cclxuICAgICAgICB0aGlzLmJsaXBOdW0rKztcclxuICAgICAgICBpZiAoY2hhci5jaGFyYWN0ZXIgPT0gXCIgXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5ibGlwTnVtID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNoYXIuaXNMYXN0Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNGaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkU3BlZWRVcCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpbmlzaCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNob3VsZFNwZWVkVXAgPSB0cnVlO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgbG9hZEZpbGUgfSBmcm9tIFwiLi9maWxlLWxvYWRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIExvY2FsaXplciB7XHJcbiAgICBwcml2YXRlIGxvY2FsaXplZDogeyBbaW5kZXg6IHN0cmluZ106IHN0cmluZ307XHJcbiAgICBwcml2YXRlIF9sYW5ndWFnZTogc3RyaW5nO1xyXG4gICAgbG9jYWxpemF0aW9uTG9hZGVkQ2FsbGJhY2s6ICgpID0+IHZvaWQ7XHJcbiAgICBjb25zdHJ1Y3RvcihsYW5ndWFnZTogc3RyaW5nLCBsb2NhbGl6YXRpb25Mb2FkZWRDYWxsYmFjaz86ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLmxvY2FsaXphdGlvbkxvYWRlZENhbGxiYWNrID0gbG9jYWxpemF0aW9uTG9hZGVkQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5fbGFuZ3VhZ2UgPSBsYW5ndWFnZTtcclxuICAgICAgICAod2luZG93IGFzIGFueSkubG9jYWxpemVyID0gdGhpcztcclxuICAgICAgICAvKmZvciAobGV0IGtleSBpbiB0aGlzLmxvY2FsaXplZCkge1xyXG4gICAgICAgICAgICBsb2FkRmlsZS5iaW5kKHRoaXMpKGtleSArIFwiLmpzb25cIiwgZnVuY3Rpb24ocmVxdWVzdDogWE1MSHR0cFJlcXVlc3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxpemVkW2tleV0gPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxpemF0aW9uTG9hZGVkQ2FsbGJhY2soa2V5KTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9Ki9cclxuICAgICAgICBsb2FkRmlsZS5iaW5kKHRoaXMpKFwiaW50ZXJmYWNlLmpzb25cIiwgZnVuY3Rpb24ocmVxdWVzdDogWE1MSHR0cFJlcXVlc3QpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbGl6ZWQgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbGl6YXRpb25Mb2FkZWRDYWxsYmFjaygpO1xyXG4gICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBsb2NhbGl6ZShuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsaXplZFtuYW1lXTtcclxuICAgIH1cclxuICAgIGdldCBsYW5ndWFnZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sYW5ndWFnZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFRhYmJlZEVsZW1lbnQgfSBmcm9tIFwiLi90YWJiZWQtZWxlbWVudFwiO1xyXG5pbXBvcnQgeyBTdG9yeU1hbmFnZXIgfSBmcm9tIFwiLi4vc3Rvcnkvc3RvcnktbWFuYWdlclwiO1xyXG5pbXBvcnQgeyByZXBsYWNlRWxlbWVudENoaWxkcmVuIH0gZnJvbSBcIi4vY2xlYXItZWxlbWVudFwiO1xyXG5pbXBvcnQgeyByZXNvbHZlUGF0aCB9IGZyb20gXCIuLi9maWxlLWxvYWRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE9yZ2FuaXplclRhYiBleHRlbmRzIFRhYmJlZEVsZW1lbnQge1xyXG4gICAgZXZpZGVuY2VDb250YWluZXJFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHN0b3J5OiBTdG9yeU1hbmFnZXI7XHJcbiAgICBjb25zdHJ1Y3RvcihzdG9yeTogU3RvcnlNYW5hZ2VyKSB7XHJcbiAgICAgICAgc3VwZXIoXCJvcmdhbml6ZXJcIixcImljb25zL29yZ2FuaXplci5zdmdcIik7XHJcbiAgICAgICAgdGhpcy5zdG9yeSA9IHN0b3J5O1xyXG4gICAgICAgIHRoaXMuYm9keUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm9yZ2FuaXplclwiKTtcclxuICAgICAgICB0aGlzLmV2aWRlbmNlQ29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgdGhpcy5ldmlkZW5jZUNvbnRhaW5lckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImV2aWRlbmNlLWNvbnRhaW5lclwiLFwicG9wXCIpO1xyXG4gICAgICAgIHRoaXMuYm9keUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5ldmlkZW5jZUNvbnRhaW5lckVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICByZXBsYWNlRWxlbWVudENoaWxkcmVuKHRoaXMuZXZpZGVuY2VDb250YWluZXJFbGVtZW50LCB0aGlzLmdldEV2aWRlbmNlRWxlbWVudHMoKSlcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbiAgICBnZXRFdmlkZW5jZUVsZW1lbnRzKCk6IEFycmF5PEhUTUxFbGVtZW50PiB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnRzOiBBcnJheTxIVE1MRWxlbWVudD4gPSBbXTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RvcnkuY3VycmVudEV2aWRlbmNlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBldmlkZW5jZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBldmlkZW5jZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImV2aWRlbmNlXCIsXCJwb3BcIik7XHJcblxyXG4gICAgICAgICAgICB2YXIgZXZpZGVuY2VJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgIGV2aWRlbmNlSW1hZ2Uuc3JjID0gdGhpcy5zdG9yeS5jdXJyZW50RXZpZGVuY2VbaV0uaW1hZ2UgPyByZXNvbHZlUGF0aCh0aGlzLnN0b3J5LmN1cnJlbnRFdmlkZW5jZVtpXS5pbWFnZSkgOiBcImh0dHBzOi8vd3d3LnN0YXBsZXMtM3AuY29tL3M3L2lzL2ltYWdlL1N0YXBsZXMvc3AzNjE4ODI4Nl9zYzc/d2lkPTUxMiZoZWk9NTEyXCI7XHJcbiAgICAgICAgICAgIGV2aWRlbmNlRWxlbWVudC5hcHBlbmRDaGlsZChldmlkZW5jZUltYWdlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBldmlkZW5jZVRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgICAgICBldmlkZW5jZVRleHQuY2xhc3NMaXN0LmFkZChcImV2aWRlbmNlLXRleHRcIik7XHJcbiAgICAgICAgICAgIGV2aWRlbmNlRWxlbWVudC5hcHBlbmRDaGlsZChldmlkZW5jZVRleHQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGV2aWRlbmNlTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG4gICAgICAgICAgICBldmlkZW5jZU5hbWUudGV4dENvbnRlbnQgPSB0aGlzLnN0b3J5LmN1cnJlbnRFdmlkZW5jZVtpXS5uYW1lO1xyXG4gICAgICAgICAgICBldmlkZW5jZU5hbWUuY2xhc3NMaXN0LmFkZChcImV2aWRlbmNlLW5hbWVcIik7XHJcbiAgICAgICAgICAgIGV2aWRlbmNlVGV4dC5hcHBlbmRDaGlsZChldmlkZW5jZU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGV2aWRlbmNlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuICAgICAgICAgICAgZXZpZGVuY2VEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHRoaXMuc3RvcnkuY3VycmVudEV2aWRlbmNlW2ldLmRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBldmlkZW5jZURlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoXCJldmlkZW5jZS1kZXNjcmlwdGlvblwiKTtcclxuICAgICAgICAgICAgZXZpZGVuY2VUZXh0LmFwcGVuZENoaWxkKGV2aWRlbmNlRGVzY3JpcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudHMucHVzaChldmlkZW5jZUVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50cyk7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VFbGVtZW50Q2hpbGRyZW4oZWxlbWVudDogSFRNTEVsZW1lbnQsIG5ld0NoaWxkcmVuOiBBcnJheTxIVE1MRWxlbWVudD4pOiBIVE1MRWxlbWVudCB7XHJcbiAgICB3aGlsZSAoZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkgeyBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLnJlbW92ZSgpOyB9XHJcbiAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQobmV3Q2hpbGRyZW5baV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9