{"map":"{\"version\":3,\"sources\":[\"webpack/bootstrap\",\"E:\\\\Projects\\\\Iris\\\\src\\\\index.ts\",\"E:\\\\Projects\\\\Iris\\\\src\\\\game.ts\",\"E:\\\\Projects\\\\Iris\\\\src\\\\story\\\\story-manager.ts\"],\"names\":[\"installedModules\",\"__webpack_require__\",\"moduleId\",\"exports\",\"module\",\"i\",\"l\",\"modules\",\"call\",\"m\",\"c\",\"d\",\"name\",\"getter\",\"o\",\"Object\",\"defineProperty\",\"enumerable\",\"get\",\"r\",\"Symbol\",\"toStringTag\",\"value\",\"t\",\"mode\",\"__esModule\",\"ns\",\"create\",\"key\",\"bind\",\"n\",\"object\",\"property\",\"prototype\",\"hasOwnProperty\",\"p\",\"s\",\"game\",\"Game\",\"document\",\"body\",\"appendChild\",\"element\",\"story_manager_1\",\"[object Object]\",\"path\",\"this\",\"createElement\",\"classList\",\"add\",\"guiWrapper\",\"userInterface\",\"textBox\",\"storyManager\",\"StoryManager\",\"currentCue\",\"speech\",\"goToNextSpeech\",\"showText\",\"character\",\"currentSpeech\",\"window\",\"addEventListener\",\"currentEpisodePosition\",\"currentChapterPosition\",\"currentCuePosition\",\"currentSpeechPosition\",\"_currentEvidence\",\"request\",\"XMLHttpRequest\",\"open\",\"send\",\"console\",\"log\",\"responseText\",\"story\",\"JSON\",\"parse\",\"episodes\",\"chapters\",\"content\",\"cue\",\"undefined\",\"currentChapter\",\"currentEpisode\",\"currentEvidence\",\"newevidence\",\"push\",\"id\",\"image\",\"length\",\"register\",\"advance\"],\"mappings\":\"aACA,IAAAA,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,GAAA,CACAG,EAAAH,EACAI,GAAA,EACAH,QAAA,IAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,EAAAA,EAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,QAAAA,OAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,aAAA,CAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,GAAA,EAAAE,GAAA,iBAAAF,GAAAA,GAAAA,EAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,UAAA,CAAyCT,YAAA,EAAAK,MAAAA,IACzC,EAAAE,GAAA,iBAAAF,EAAA,IAAA,IAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,GAAAA,EAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,EAAAA,EAAAmC,EAAA,mFChFA,IAAIC,EAAO,IAFXpC,EAAA,GAEeqC,MAAK,oDACpBC,SAASC,KAAKC,YAAYJ,EAAKK,wFCH/B,MAAAC,EAAA1C,EAAA,GAIAE,EAAAmC,KAAA,MAKIM,YAAYC,GACRC,KAAKJ,QAAUH,SAASQ,cAAc,OACtCD,KAAKJ,QAAQM,UAAUC,IAAI,QAE3B,IAAIC,EAAaX,SAASQ,cAAc,OACxCG,EAAWF,UAAUC,IAAI,qBAEzBC,EAAWT,YAAYK,KAAKK,cAAcC,QAAQV,SAClDI,KAAKJ,QAAQD,YAAYS,GAEzBJ,KAAKO,aAAe,IAAIV,EAAAW,aAAaT,GAChCC,KAAKO,aAAaE,WAAWC,QAC9BV,KAAKO,aAAaI,iBAEtBX,KAAKK,cAAcC,QAAQM,SAASZ,KAAKO,aAAaE,WAAWI,UAAWb,KAAKO,aAAaO,eAE9FC,OAAOC,iBAAiB,QAAS,WAC7BhB,KAAKO,aAAaI,iBAClBX,KAAKK,cAAcC,QAAQM,SAASZ,KAAKO,aAAaE,WAAWI,UAAWb,KAAKO,aAAaO,gBAChG/B,KAAKiB,wFCtBf3C,EAAAmD,aAAA,MAOIV,YAAYC,GALJC,KAAAiB,uBAAiC,EACjCjB,KAAAkB,uBAAiC,EACjClB,KAAAmB,mBAA6B,EAC7BnB,KAAAoB,sBAAgC,EAChCpB,KAAAqB,iBAAoC,GAExC,IAAIC,EAAU,IAAIC,eAClBD,EAAQE,KAAK,MAAOzB,GAAM,GAC1BuB,EAAQG,KAAK,MACbC,QAAQC,IAAIL,EAAQM,cACpB5B,KAAK6B,MAAQC,KAAKC,MAAMT,EAAQM,cAEhCF,QAAQC,IAAI3B,KAAK6B,OAErBf,oBACI,IAAIJ,EAASV,KAAK6B,MAAMG,SAAShC,KAAKiB,wBAAwBgB,SAASjC,KAAKkB,wBAAwBgB,QAAQlC,KAAKmB,oBAAoBT,OAAOV,KAAKoB,uBAEjJ,OADAM,QAAQC,IAAIjB,GACLA,EAEXD,iBACI,IAAI0B,EAAMnC,KAAK6B,MAAMG,SAAShC,KAAKiB,wBAAwBgB,SAASjC,KAAKkB,wBAAwBgB,QAAQlC,KAAKmB,oBAC9G,GAAWiB,MAAPD,EACA,KAAM,oCAGV,OAAOA,EAEXE,qBACI,OAAOrC,KAAK6B,MAAMG,SAAShC,KAAKiB,wBAAwBgB,SAASjC,KAAKkB,wBAE1EoB,qBACI,OAAOtC,KAAK6B,MAAMG,SAAShC,KAAKiB,wBAEpCsB,sBACI,OAAOvC,KAAKqB,iBAEhBvB,WACQE,KAAKS,WAAW+B,aAChBxC,KAAKqB,iBAAiBoB,KAAK,CACvB3E,KAAMkC,KAAKS,WAAW3C,KACtB4E,GAAI1C,KAAKS,WAAW+B,YACpBG,MAAO3C,KAAKS,WAAWkC,MAAQ3C,KAAKS,WAAWkC,MAAQ,6KAInE7C,UACQE,KAAKS,WAAWC,QAAUV,KAAKS,WAAWC,OAAOkC,OAAS,EAAI5C,KAAKoB,uBACnEpB,KAAKoB,wBACLM,QAAQC,IAAI,0CAA4C3B,KAAKoB,wBACtDpB,KAAKqC,eAAeH,QAAQU,OAAS5C,KAAKmB,oBACjDnB,KAAKmB,qBACLnB,KAAKoB,sBAAwB,EAC7BM,QAAQC,IAAI,0BACL3B,KAAKsC,eAAeL,SAASW,OAAS5C,KAAKkB,yBAClDlB,KAAKkB,yBACLlB,KAAKoB,sBAAwB,EAC7BpB,KAAKmB,mBAAqB,EAC1BO,QAAQC,IAAI,8BAGpB7B,iBACI,GACIE,KAAK6C,WACL7C,KAAK8C,iBACC9C,KAAKS,WAAWC\",\"sourcesContent\":[\" \\t// The module cache\\n \\tvar installedModules = {};\\n\\n \\t// The require function\\n \\tfunction __webpack_require__(moduleId) {\\n\\n \\t\\t// Check if module is in cache\\n \\t\\tif(installedModules[moduleId]) {\\n \\t\\t\\treturn installedModules[moduleId].exports;\\n \\t\\t}\\n \\t\\t// Create a new module (and put it into the cache)\\n \\t\\tvar module = installedModules[moduleId] = {\\n \\t\\t\\ti: moduleId,\\n \\t\\t\\tl: false,\\n \\t\\t\\texports: {}\\n \\t\\t};\\n\\n \\t\\t// Execute the module function\\n \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n\\n \\t\\t// Flag the module as loaded\\n \\t\\tmodule.l = true;\\n\\n \\t\\t// Return the exports of the module\\n \\t\\treturn module.exports;\\n \\t}\\n\\n\\n \\t// expose the modules object (__webpack_modules__)\\n \\t__webpack_require__.m = modules;\\n\\n \\t// expose the module cache\\n \\t__webpack_require__.c = installedModules;\\n\\n \\t// define getter function for harmony exports\\n \\t__webpack_require__.d = function(exports, name, getter) {\\n \\t\\tif(!__webpack_require__.o(exports, name)) {\\n \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n \\t\\t}\\n \\t};\\n\\n \\t// define __esModule on exports\\n \\t__webpack_require__.r = function(exports) {\\n \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n \\t\\t}\\n \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n \\t};\\n\\n \\t// create a fake namespace object\\n \\t// mode & 1: value is a module id, require it\\n \\t// mode & 2: merge all properties of value into the ns\\n \\t// mode & 4: return value when already ns object\\n \\t// mode & 8|1: behave like require\\n \\t__webpack_require__.t = function(value, mode) {\\n \\t\\tif(mode & 1) value = __webpack_require__(value);\\n \\t\\tif(mode & 8) return value;\\n \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n \\t\\tvar ns = Object.create(null);\\n \\t\\t__webpack_require__.r(ns);\\n \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n \\t\\treturn ns;\\n \\t};\\n\\n \\t// getDefaultExport function for compatibility with non-harmony modules\\n \\t__webpack_require__.n = function(module) {\\n \\t\\tvar getter = module && module.__esModule ?\\n \\t\\t\\tfunction getDefault() { return module['default']; } :\\n \\t\\t\\tfunction getModuleExports() { return module; };\\n \\t\\t__webpack_require__.d(getter, 'a', getter);\\n \\t\\treturn getter;\\n \\t};\\n\\n \\t// Object.prototype.hasOwnProperty.call\\n \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n\\n \\t// __webpack_public_path__\\n \\t__webpack_require__.p = \\\"\\\";\\n\\n\\n \\t// Load entry module and return exports\\n \\treturn __webpack_require__(__webpack_require__.s = 0);\\n\",\"import { Game } from \\\"./game\\\";\\r\\n\\r\\nvar game = new Game(\\\"https://review.st-ignati.us/chemistry/story.json\\\");\\r\\ndocument.body.appendChild(game.element);\",\"import { StoryManager } from \\\"./story/story-manager\\\";\\r\\nimport { Visuals } from \\\"./visuals\\\";\\r\\nimport { UserInterface } from \\\"./user-interface\\\";\\r\\n\\r\\nexport class Game {\\r\\n    storyManager: StoryManager;\\r\\n    userInterface: UserInterface;\\r\\n    visuals: Visuals;\\r\\n    element: HTMLElement;\\r\\n    constructor(path: string) {\\r\\n        this.element = document.createElement(\\\"div\\\");\\r\\n        this.element.classList.add(\\\"game\\\");\\r\\n\\r\\n        var guiWrapper = document.createElement(\\\"div\\\");\\r\\n        guiWrapper.classList.add(\\\"interface-wrapper\\\");\\r\\n\\r\\n        guiWrapper.appendChild(this.userInterface.textBox.element);\\r\\n        this.element.appendChild(guiWrapper);\\r\\n\\r\\n        this.storyManager = new StoryManager(path);\\r\\n        if (!this.storyManager.currentCue.speech) {\\r\\n            this.storyManager.goToNextSpeech();\\r\\n        }\\r\\n        this.userInterface.textBox.showText(this.storyManager.currentCue.character, this.storyManager.currentSpeech);\\r\\n\\r\\n        window.addEventListener(\\\"click\\\", function () {\\r\\n            this.storyManager.goToNextSpeech();\\r\\n            this.userInterface.textBox.showText(this.storyManager.currentCue.character, this.storyManager.currentSpeech);\\r\\n        }.bind(this));\\r\\n    }\\r\\n}\",\"import { Story } from \\\"./story\\\";\\r\\nimport { Cue } from \\\"./cue\\\";\\r\\nimport { Chapter } from \\\"./chapter\\\";\\r\\nimport { Episode } from \\\"./episode\\\";\\r\\nimport { Evidence } from \\\"./evidence\\\";\\r\\n\\r\\nexport class StoryManager {\\r\\n    private story: Story;\\r\\n    private currentEpisodePosition: number = 0;\\r\\n    private currentChapterPosition: number = 0;\\r\\n    private currentCuePosition: number = 0;\\r\\n    private currentSpeechPosition: number = 0;\\r\\n    private _currentEvidence: Array<Evidence> = [];\\r\\n    constructor(path: string) {\\r\\n        var request = new XMLHttpRequest();\\r\\n        request.open(\\\"GET\\\", path, false);\\r\\n        request.send(null);\\r\\n        console.log(request.responseText);\\r\\n        this.story = JSON.parse(request.responseText);\\r\\n        //this.story = <Story>(JSON.parse('{ \\\"episodes\\\":[ { \\\"title\\\":\\\"The Scientific Turnabout\\\", \\\"chapters\\\":[ { \\\"title\\\":\\\"Trial Lobby\\\", \\\"content\\\":[ { \\\"character\\\":\\\"$Rookie\\\", \\\"speech\\\":[ \\\"##mode(thought)(My name is $Rookie, and Im a defence attorney.)\\\", \\\"(More specifically, I am a scientific attorney--and today is my first case.)\\\" ] } ] } ] }, { \\\"title\\\":\\\"Turnabout for Futurity\\\", \\\"locked\\\":true } ] }'));\\r\\n        console.log(this.story);\\r\\n    }\\r\\n    get currentSpeech(): string {\\r\\n        var speech = this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition].content[this.currentCuePosition].speech[this.currentSpeechPosition];\\r\\n        console.log(speech);\\r\\n        return speech;\\r\\n    }\\r\\n    get currentCue(): Cue {\\r\\n        var cue = this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition].content[this.currentCuePosition];\\r\\n        if (cue == undefined) {\\r\\n            throw \\\"Error: Found cue to be undefined!\\\";\\r\\n        }\\r\\n        //console.log(cue);\\r\\n        return cue;\\r\\n    }\\r\\n    get currentChapter(): Chapter {\\r\\n        return this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition]\\r\\n    }\\r\\n    get currentEpisode(): Episode {\\r\\n        return this.story.episodes[this.currentEpisodePosition];\\r\\n    }\\r\\n    get currentEvidence(): Array<Evidence> {\\r\\n        return this._currentEvidence;\\r\\n    }\\r\\n    register() {\\r\\n        if (this.currentCue.newevidence) {\\r\\n            this._currentEvidence.push({\\r\\n                name: this.currentCue.name,\\r\\n                id: this.currentCue.newevidence,\\r\\n                image: this.currentCue.image ? this.currentCue.image : \\\"https://previews.123rf.com/images/iqoncept/iqoncept0901/iqoncept090100094/4221417-a-white-wrinkled-piece-of-paper-background-for-slides-brochures-and-presentations-.jpg\\\"\\r\\n            });\\r\\n        }\\r\\n    }\\r\\n    advance() {\\r\\n        if (this.currentCue.speech && this.currentCue.speech.length - 1 > this.currentSpeechPosition) {\\r\\n            this.currentSpeechPosition++;\\r\\n            console.log(\\\"Advanced to next speech. New position: \\\" + this.currentSpeechPosition);\\r\\n        } else if (this.currentChapter.content.length > this.currentCuePosition) {\\r\\n            this.currentCuePosition++;\\r\\n            this.currentSpeechPosition = 0;\\r\\n            console.log(\\\"Advanced to next cue.\\\");\\r\\n        } else if (this.currentEpisode.chapters.length > this.currentChapterPosition) {\\r\\n            this.currentChapterPosition++;\\r\\n            this.currentSpeechPosition = 0;\\r\\n            this.currentCuePosition = 0;\\r\\n            console.log(\\\"Advanced to next chapter.\\\");\\r\\n        }\\r\\n    }\\r\\n    goToNextSpeech() {\\r\\n        do {\\r\\n            this.register();\\r\\n            this.advance();\\r\\n        } while (!this.currentCue.speech);\\r\\n    }\\r\\n}\"]}","code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=new(r(1).Game)(\"https://review.st-ignati.us/chemistry/story.json\");document.body.appendChild(n.element)},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});const n=r(2);t.Game=class{constructor(e){this.element=document.createElement(\"div\"),this.element.classList.add(\"game\");var t=document.createElement(\"div\");t.classList.add(\"interface-wrapper\"),t.appendChild(this.userInterface.textBox.element),this.element.appendChild(t),this.storyManager=new n.StoryManager(e),this.storyManager.currentCue.speech||this.storyManager.goToNextSpeech(),this.userInterface.textBox.showText(this.storyManager.currentCue.character,this.storyManager.currentSpeech),window.addEventListener(\"click\",function(){this.storyManager.goToNextSpeech(),this.userInterface.textBox.showText(this.storyManager.currentCue.character,this.storyManager.currentSpeech)}.bind(this))}}},function(e,t,r){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.StoryManager=class{constructor(e){this.currentEpisodePosition=0,this.currentChapterPosition=0,this.currentCuePosition=0,this.currentSpeechPosition=0,this._currentEvidence=[];var t=new XMLHttpRequest;t.open(\"GET\",e,!1),t.send(null),console.log(t.responseText),this.story=JSON.parse(t.responseText),console.log(this.story)}get currentSpeech(){var e=this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition].content[this.currentCuePosition].speech[this.currentSpeechPosition];return console.log(e),e}get currentCue(){var e=this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition].content[this.currentCuePosition];if(null==e)throw\"Error: Found cue to be undefined!\";return e}get currentChapter(){return this.story.episodes[this.currentEpisodePosition].chapters[this.currentChapterPosition]}get currentEpisode(){return this.story.episodes[this.currentEpisodePosition]}get currentEvidence(){return this._currentEvidence}register(){this.currentCue.newevidence&&this._currentEvidence.push({name:this.currentCue.name,id:this.currentCue.newevidence,image:this.currentCue.image?this.currentCue.image:\"https://previews.123rf.com/images/iqoncept/iqoncept0901/iqoncept090100094/4221417-a-white-wrinkled-piece-of-paper-background-for-slides-brochures-and-presentations-.jpg\"})}advance(){this.currentCue.speech&&this.currentCue.speech.length-1>this.currentSpeechPosition?(this.currentSpeechPosition++,console.log(\"Advanced to next speech. New position: \"+this.currentSpeechPosition)):this.currentChapter.content.length>this.currentCuePosition?(this.currentCuePosition++,this.currentSpeechPosition=0,console.log(\"Advanced to next cue.\")):this.currentEpisode.chapters.length>this.currentChapterPosition&&(this.currentChapterPosition++,this.currentSpeechPosition=0,this.currentCuePosition=0,console.log(\"Advanced to next chapter.\"))}goToNextSpeech(){do{this.register(),this.advance()}while(!this.currentCue.speech)}}}]);","extractedComments":[]}